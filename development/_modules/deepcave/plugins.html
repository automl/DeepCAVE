<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>deepcave.plugins &#8212; DeepCAVE Documentation 1.4 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ac9c05f7c49ca1e1f876c6e36360ea26.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=2eb4fb78" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    
  <link rel="preload" as="script" href="../../_static/js/index.9ea38e314b9e6d9dab77.js">

    <script src="../../_static/documentation_options.js?v=1e247831"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
  <a class="navbar-brand" href="../../index.html">
  <!-- <p class="title">DeepCAVE Documentation</p> -->
  </a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/automl/DeepCAVE" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/automl_org?lang=de" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <div class="dropdown mt-1">
    <button type="button" class="btn btn-secondary btn-md navbar-btn dropdown-toggle" id="dLabelMore"
        data-toggle="dropdown">
        v1.4
        <span class="caret"></span>
    </button>
    <div class="dropdown-menu list-group-flush py-0" aria-labelledby="dLabelMore">
        <a class="list-group-item list-group-item-action" href="#">v1.4</a>
    </div>
</div>
      </div>
      
      <div class="navbar-end-item">
        <form class="bd-search align-items-center" action="../../search.html" method="get" style="width: 100%;">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control btn btn-md" name="q" id="search-input"
    placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off">
</form>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><h4 class="mt-0 mb-0"><a href="../../index.html">DeepCAVE Documentation</a></h4>
<div class="mb-3">v1.4</div><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../examples/index.html">
   Examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../examples/api/index.html">
     API
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/api/pdp.html">
       Partial Dependencies
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/api/parallel_coordinates.html">
       Parallel Coordinates
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/api/importances.html">
       Importances
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/api/ablation_paths.html">
       Ablation Paths
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../examples/record/index.html">
     Record
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/record/minimal.html">
       Record Minimal Run
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/record/digits_sklearn.html">
       Multi-Layer Perceptron via Sklearn
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/record/mnist_pytorch.html">
       Multi-Layer Perceptron via PyTorch
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../plugins/index.html">
   Displaying Data with Plugins
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/overview.html">
     Overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/configurations.html">
     Configurations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/configuration_footprint.html">
     Configuration Footprint
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/cost_over_time.html">
     Cost Over Time
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/pareto_front.html">
     Pareto Front
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/budget_correlation.html">
     Budget Correlation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/importances.html">
     Importances
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/ablation_paths.html">
     Ablation Paths
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/configuration_cube.html">
     Configuration Cube
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/parallel_coordinates.html">
     Parallel Coordinates
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/partial_dependencies.html">
     Partial Dependencies
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/symbolic_explanations.html">
     Symbolic Explanations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/custom_plugins.html">
     Adding a Plugin
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../converters/index.html">
   Runs and Converters
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/smac.html">
     SMAC
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/amltk.html">
     AMLTK
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/optuna.html">
     Optuna
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/raytune.html">
     RayTune
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/bohb.html">
     BOHB
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/deepcave.html">
     DeepCAVE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/dataframe.html">
     Pandas DataFrame
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/custom_converters.html">
     Adding a Converter
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../how_to_contribute.html">
   How to Contribute
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../api.html">
   API References
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.runs.html">
     deepcave.runs
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/deepcave.runs.converters.html">
       deepcave.runs.converters
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
      <label for="toctree-checkbox-8">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.amltk.html">
         deepcave.runs.converters.amltk
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.bohb.html">
         deepcave.runs.converters.bohb
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.dataframe.html">
         deepcave.runs.converters.dataframe
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.deepcave.html">
         deepcave.runs.converters.deepcave
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.optuna.html">
         deepcave.runs.converters.optuna
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.smac3v1.html">
         deepcave.runs.converters.smac3v1
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.smac3v2.html">
         deepcave.runs.converters.smac3v2
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.exceptions.html">
       deepcave.runs.exceptions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.group.html">
       deepcave.runs.group
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.handler.html">
       deepcave.runs.handler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.objective.html">
       deepcave.runs.objective
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.recorder.html">
       deepcave.runs.recorder
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.run.html">
       deepcave.runs.run
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.status.html">
       deepcave.runs.status
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.trial.html">
       deepcave.runs.trial
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.plugins.html">
     deepcave.plugins
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.plugins.budget.html">
       deepcave.plugins.budget
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.plugins.dynamic.html">
       deepcave.plugins.dynamic
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.html">
       deepcave.plugins.hyperparameter
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
      <label for="toctree-checkbox-10">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.ablation_paths.html">
         deepcave.plugins.hyperparameter.ablation_paths
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.configuration_cube.html">
         deepcave.plugins.hyperparameter.configuration_cube
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.importances.html">
         deepcave.plugins.hyperparameter.importances
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.parallel_coordinates.html">
         deepcave.plugins.hyperparameter.parallel_coordinates
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.pdp.html">
         deepcave.plugins.hyperparameter.pdp
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.symbolic_explanations.html">
         deepcave.plugins.hyperparameter.symbolic_explanations
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.plugins.objective.html">
       deepcave.plugins.objective
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.plugins.static.html">
       deepcave.plugins.static
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/deepcave.plugins.summary.html">
       deepcave.plugins.summary
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
      <label for="toctree-checkbox-11">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.summary.configurations.html">
         deepcave.plugins.summary.configurations
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.summary.footprint.html">
         deepcave.plugins.summary.footprint
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.summary.overview.html">
         deepcave.plugins.summary.overview
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.layouts.html">
     deepcave.layouts
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.layouts.header.html">
       deepcave.layouts.header
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.layouts.not_found.html">
       deepcave.layouts.not_found
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.layouts.sidebar.html">
       deepcave.layouts.sidebar
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.evaluators.html">
     deepcave.evaluators
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.ablation.html">
       deepcave.evaluators.ablation
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/deepcave.evaluators.epm.html">
       deepcave.evaluators.epm
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
      <label for="toctree-checkbox-14">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.evaluators.epm.fanova_forest.html">
         deepcave.evaluators.epm.fanova_forest
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.evaluators.epm.random_forest.html">
         deepcave.evaluators.epm.random_forest
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.evaluators.epm.random_forest_surrogate.html">
         deepcave.evaluators.epm.random_forest_surrogate
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.evaluators.epm.utils.html">
         deepcave.evaluators.epm.utils
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.fanova.html">
       deepcave.evaluators.fanova
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.footprint.html">
       deepcave.evaluators.footprint
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.lpi.html">
       deepcave.evaluators.lpi
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.mo_ablation.html">
       deepcave.evaluators.mo_ablation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.mo_fanova.html">
       deepcave.evaluators.mo_fanova
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.mo_lpi.html">
       deepcave.evaluators.mo_lpi
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.utils.html">
     deepcave.utils
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
    <label for="toctree-checkbox-15">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.cache.html">
       deepcave.utils.cache
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.cast.html">
       deepcave.utils.cast
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.compression.html">
       deepcave.utils.compression
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.configs.html">
       deepcave.utils.configs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.configspace.html">
       deepcave.utils.configspace
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.converters.html">
       deepcave.utils.converters
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.dash.html">
       deepcave.utils.dash
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.data_structures.html">
       deepcave.utils.data_structures
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.docs.html">
       deepcave.utils.docs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.files.html">
       deepcave.utils.files
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.hash.html">
       deepcave.utils.hash
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.layout.html">
       deepcave.utils.layout
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.logs.html">
       deepcave.utils.logs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.multi_objective_importance.html">
       deepcave.utils.multi_objective_importance
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.notification.html">
       deepcave.utils.notification
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.run_caches.html">
       deepcave.utils.run_caches
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.styled_plotty.html">
       deepcave.utils.styled_plotty
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.symbolic_regression.html">
       deepcave.utils.symbolic_regression
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.url.html">
       deepcave.utils.url
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.util.html">
       deepcave.utils.util
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../faq.html">
   Frequently Asked Questions
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <h1>Source code for deepcave.plugins</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2021-2024 The DeepCAVE Authors</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#   http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>

<span class="c1">#  noqa: D400</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd"># Plugins</span>

<span class="sd">This module provides a base class for all the available plugins.</span>
<span class="sd">It provides different utilities to handle the plugins and check for compatibility in the runs.</span>

<span class="sd">## Classes</span>
<span class="sd">    - Plugin: Base class for all plugins.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">copy</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">webbrowser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">defaultdict</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">dash_bootstrap_components</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">dbc</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dash</span><span class="w"> </span><span class="kn">import</span> <span class="n">dcc</span><span class="p">,</span> <span class="n">html</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dash.dependencies</span><span class="w"> </span><span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span><span class="p">,</span> <span class="n">State</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dash.development.base_component</span><span class="w"> </span><span class="kn">import</span> <span class="n">Component</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">dash.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">PreventUpdate</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave</span><span class="w"> </span><span class="kn">import</span> <span class="n">ROOT_DIR</span><span class="p">,</span> <span class="n">DOC_ROOT</span><span class="p">,</span> <span class="n">interactive</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.layouts</span><span class="w"> </span><span class="kn">import</span> <span class="n">Layout</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.runs</span><span class="w"> </span><span class="kn">import</span> <span class="n">AbstractRun</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.runs.group</span><span class="w"> </span><span class="kn">import</span> <span class="n">Group</span><span class="p">,</span> <span class="n">NotMergeableError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.utils.data_structures</span><span class="w"> </span><span class="kn">import</span> <span class="n">update_dict</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.utils.docs</span><span class="w"> </span><span class="kn">import</span> <span class="n">rst_to_md</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.utils.hash</span><span class="w"> </span><span class="kn">import</span> <span class="n">string_to_hash</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.utils.layout</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_select_options</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.utils.logs</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.utils.url</span><span class="w"> </span><span class="kn">import</span> <span class="n">parse_url</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<div class="viewcode-block" id="Plugin">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">Plugin</span><span class="p">(</span><span class="n">Layout</span><span class="p">,</span> <span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for all plugins.</span>

<span class="sd">    Provides different utilities to handle the plugins and check for compatibility in the runs.</span>

<span class="sd">    Properties</span>
<span class="sd">    ----------</span>
<span class="sd">    inputs : List[Tuple[str, str, bool, Any]]</span>
<span class="sd">        The registered inputs.</span>
<span class="sd">    outputs : List[Tuple[str, str, bool]]</span>
<span class="sd">        The registered outputs.</span>
<span class="sd">    previous_inputs : Dict[str, Dict[str, str]]</span>
<span class="sd">        The previous inputs.</span>
<span class="sd">    raw_outputs : Optional[Dict[str, Any]]</span>
<span class="sd">        The raw outputs.</span>
<span class="sd">    activate_run_selection : bool</span>
<span class="sd">        Shows a dropdown to select a run in the inputs layout.</span>
<span class="sd">        This feature is useful if only one run could be viewed at a time.</span>
<span class="sd">        Moreover, it prevents the plugin to calculate results across all runs.</span>
<span class="sd">    id : str</span>
<span class="sd">        The unique identifier for the plugin.</span>
<span class="sd">    runs : List[AbstractRun]</span>
<span class="sd">        A list of the abstract runs.</span>
<span class="sd">    groups : List[Group]</span>
<span class="sd">        A list of the groups.</span>
<span class="sd">    help : str</span>
<span class="sd">        The path to the documentation.</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the plugin.</span>
<span class="sd">        It is shown in the navigation and title.</span>
<span class="sd">    button_caption : str</span>
<span class="sd">        Caption of the button. Shown only, if `StaticPlugin` is used.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">icon</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;far fa-file&quot;</span>
    <span class="n">help</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">button_caption</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Process&quot;</span>
    <span class="n">activate_run_selection</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Registered inputs and outputs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># For runtime</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_outputs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># The output layout has to be called one time to register</span>
        <span class="c1"># the values</span>
        <span class="c1"># Problem: Inputs/Outputs can&#39;t be changed afterwards anymore.</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">get_run_input_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">get_input_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_input</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">get_filter_layout</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_input</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">get_output_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_output</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

<div class="viewcode-block" id="Plugin.get_base_url">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.get_base_url">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_base_url</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the url for the plugin.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Url for the plugin as string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deepcave</span><span class="w"> </span><span class="kn">import</span> <span class="n">config</span>

        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;http://</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">DASH_ADDRESS</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">DASH_PORT</span><span class="si">}</span><span class="s2">/plugins/</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="Plugin.check_run_compatibility">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.check_run_compatibility">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_run_compatibility</span><span class="p">(</span><span class="n">run</span><span class="p">:</span> <span class="n">AbstractRun</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if a run is compatible with this plugin.</span>

<span class="sd">        If a plugin is not compatible, you can not select the run.</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        This function is only called if `activate_run_selection` is True.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        run : AbstractRun</span>
<span class="sd">            One of the selected runs/groups.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            Returns True if the run is compatible.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="Plugin.check_runs_compatibility">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.check_runs_compatibility">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">check_runs_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">runs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Needed if all selected runs need something in common.</span>

<span class="sd">        (e.g. budget or objective). Since this function is called before the layout is created,</span>
<span class="sd">        it can be also used to set common values for the plugin.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        runs : List[AbstractRun]</span>
<span class="sd">            Selected runs.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotMergeableError</span>
<span class="sd">            If runs are not compatible, an error is thrown.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="Plugin.register_input">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.register_input">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">register_input</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register an input variable for the plugin.</span>

<span class="sd">        It is important to register the inputs.</span>
<span class="sd">        This is, because callbacks have to be defined before the server is started.</span>
<span class="sd">        After registering all inputs, an internal mapping is created.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id : str</span>
<span class="sd">            Specifies the id of the input.</span>
<span class="sd">        attributes : Union[str, List[str]], optional</span>
<span class="sd">            Attributes which should be passed to the (dash) component, by default (&quot;value&quot;,).</span>
<span class="sd">        filter : bool, optional</span>
<span class="sd">            Specifies if the input is a filter. By default False.</span>
<span class="sd">        type : Any, optional</span>
<span class="sd">            Type to which the *first* attribute should be casted to. By default str.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        id : str</span>
<span class="sd">            Unique id for the input and plugin. This is necessary because ids are defined globally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attributes</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attributes</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">attributes</span><span class="p">):</span>
            <span class="c1"># Only cast the first attribute</span>
            <span class="n">type_</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">type_</span> <span class="o">=</span> <span class="nb">type</span>

            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">type_</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

        <span class="c1"># The inputs have to be rearranged, because `State`</span>
        <span class="c1"># must follow all `Input`. Since all filters are `Input`, they have to</span>
        <span class="c1"># be shifted to the front.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_internal_input_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></div>


<div class="viewcode-block" id="Plugin.register_output">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.register_output">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">register_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attributes</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register an output variable for the plugin.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id : str</span>
<span class="sd">            Specifies the id of the output.</span>
<span class="sd">        attributes : Union[str, List[str]], optional</span>
<span class="sd">            Attribute, by default &quot;value&quot;</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        id : str</span>
<span class="sd">            Unique id for the output and plugin. This is necessary because ids are defined globally.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attributes</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attributes</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_internal_output_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></div>


<div class="viewcode-block" id="Plugin.get_internal_id">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.get_internal_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_internal_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the internal id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">&quot;</span></div>


<div class="viewcode-block" id="Plugin.get_internal_input_id">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.get_internal_input_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_internal_input_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the internal input id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">-input&quot;</span></div>


<div class="viewcode-block" id="Plugin.get_internal_output_id">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.get_internal_output_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_internal_output_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the internal output id.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s2">-output&quot;</span></div>


<div class="viewcode-block" id="Plugin.register_callbacks">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.register_callbacks">[docs]</a>
    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">register_callbacks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Register basic callbacks for the plugin.</span>

<span class="sd">        Following callbacks are registered:</span>
<span class="sd">        - If inputs changes, the changes are pasted back. This is in particular</span>
<span class="sd">        interest if input dependencies are used.</span>
<span class="sd">        - Raw data dialog to display raw data.</span>
<span class="sd">        - Callback to be redirected to the config if clicked on it.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        RuntimeError</span>
<span class="sd">            If no run id is found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deepcave</span><span class="w"> </span><span class="kn">import</span> <span class="n">app</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">run_handler</span>

        <span class="c1"># Handles the initial and the cashed input values</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s2">&quot;on-page-load&quot;</span><span class="p">,</span> <span class="s2">&quot;href&quot;</span><span class="p">)]</span>

        <span class="c1"># Define also inputs if they are declared as interactive</span>
        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
            <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Input</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_input_id</span><span class="p">(</span><span class="nb">id</span><span class="p">),</span> <span class="n">attribute</span><span class="p">))</span>

        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
            <span class="n">outputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Output</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_input_id</span><span class="p">(</span><span class="nb">id</span><span class="p">),</span> <span class="n">attribute</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">plugin_input_update</span><span class="p">(</span><span class="n">pathname</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="n">inputs_list</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;Update the input of the plugin.&quot;&quot;&quot;</span>
                <span class="c1"># Simple check if page was loaded for the first time</span>
                <span class="n">init</span> <span class="o">=</span> <span class="nb">all</span><span class="p">(</span><span class="nb">input</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="n">inputs_list</span><span class="p">)</span>

                <span class="c1"># Reload our inputs</span>
                <span class="k">if</span> <span class="n">init</span><span class="p">:</span>
                    <span class="n">inputs</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;last_inputs&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                    <span class="n">passed_inputs</span> <span class="o">=</span> <span class="n">parse_url</span><span class="p">(</span><span class="n">pathname</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">passed_inputs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># First get normal inputs</span>
                        <span class="n">inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_inputs</span><span class="p">()</span>
                        <span class="c1"># Overwrite/set the passed inputs</span>
                        <span class="n">update_dict</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">passed_inputs</span><span class="p">)</span>

                        <span class="c1"># Then the run_selection has to be taken care of</span>
                        <span class="n">selected_run</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
                            <span class="c1"># If run_selection is active and the id is not known, then</span>
                            <span class="c1"># the passed inputs have no use.</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">run_id</span> <span class="o">=</span> <span class="n">passed_inputs</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
                            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No run id found.&quot;</span><span class="p">)</span>
                            <span class="n">selected_run</span> <span class="o">=</span> <span class="n">run_handler</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span>

                            <span class="c1"># Update run_selection</span>
                            <span class="n">new_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">load_run_inputs</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">runs</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">check_run_compatibility</span><span class="p">,</span>
                            <span class="p">)</span>

                            <span class="c1"># Overwrite `run_id` and update the whole dict.</span>
                            <span class="n">new_inputs</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_id</span>
                            <span class="n">update_dict</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">new_inputs</span><span class="p">)</span>

                        <span class="c1"># And lastly update with the dependencies here</span>
                        <span class="n">user_dependencies_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_dependency_inputs</span><span class="p">(</span>
                            <span class="n">selected_run</span><span class="p">,</span> <span class="n">inputs</span><span class="p">,</span> <span class="n">inputs</span>
                        <span class="p">)</span>
                        <span class="n">update_dict</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">user_dependencies_inputs</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="n">inputs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_inputs</span><span class="p">()</span>

                        <span class="c1"># Also update the run selection</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
                            <span class="n">new_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">load_run_inputs</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">runs</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">check_run_compatibility</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="n">update_dict</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">new_inputs</span><span class="p">)</span>

                        <span class="c1"># Set not used inputs</span>
                        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
                            <span class="k">if</span> <span class="nb">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">:</span>
                                <span class="n">inputs</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

                            <span class="k">if</span> <span class="n">attribute</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">[</span><span class="nb">id</span><span class="p">]:</span>
                                <span class="n">inputs</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">elif</span> <span class="n">inputs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># The options of the run selection have to be updated here.</span>
                        <span class="c1"># This is important if the user have added/removed runs.</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
                            <span class="n">run_value</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
                            <span class="n">new_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">load_run_inputs</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">runs</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">groups</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">check_run_compatibility</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="n">update_dict</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">new_inputs</span><span class="p">)</span>

                            <span class="c1"># Keep the run value</span>
                            <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">run_value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Map the list `inputs` to a dict.</span>
                    <span class="c1"># inputs_list_as_list is necessary as new variable,</span>
                    <span class="c1"># because inputs_list is a tuple and cant be passed to _list_to_dict.</span>
                    <span class="n">inputs_list_as_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">inputs_list</span><span class="p">)</span>
                    <span class="n">inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_list_to_dict</span><span class="p">(</span><span class="n">inputs_list_as_list</span><span class="p">)</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">previous_inputs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">previous_inputs</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                    <span class="c1"># Only work on copies.</span>
                    <span class="c1"># The inputs dict should not be changed by the user.</span>
                    <span class="n">_previous_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">previous_inputs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="n">_inputs</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

                    <span class="n">selected_run</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;run&quot;</span> <span class="ow">in</span> <span class="n">_previous_inputs</span><span class="p">:</span>
                            <span class="n">_previous_run_id</span> <span class="o">=</span> <span class="n">_previous_inputs</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">_previous_run_id</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="n">_run_id</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

                        <span class="c1"># Reset everything if run name changed.</span>
                        <span class="k">if</span> <span class="n">_previous_run_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">_previous_run_id</span> <span class="o">!=</span> <span class="n">_run_id</span><span class="p">:</span>
                            <span class="c1"># load_inputs cannot be used here, only</span>
                            <span class="c1"># because `run` would be removed.</span>
                            <span class="c1"># Also: The current run name does not need to be kept.</span>
                            <span class="n">update_dict</span><span class="p">(</span><span class="n">_inputs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_inputs</span><span class="p">())</span>
                            <span class="c1"># Reset inputs</span>
                            <span class="k">if</span> <span class="s2">&quot;objective_id&quot;</span> <span class="ow">in</span> <span class="n">_inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                                <span class="n">update_dict</span><span class="p">(</span><span class="n">_inputs</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;objective_id&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}})</span>
                            <span class="k">if</span> <span class="s2">&quot;budget_id&quot;</span> <span class="ow">in</span> <span class="n">_inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                                <span class="n">update_dict</span><span class="p">(</span><span class="n">_inputs</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;budget_id&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}})</span>
                            <span class="k">if</span> <span class="s2">&quot;hyperparameter_name_1&quot;</span> <span class="ow">in</span> <span class="n">_inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                                <span class="n">update_dict</span><span class="p">(</span><span class="n">_inputs</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;hyperparameter_name_1&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}})</span>
                            <span class="k">if</span> <span class="s2">&quot;hyperparameter_name_2&quot;</span> <span class="ow">in</span> <span class="n">_inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                                <span class="n">update_dict</span><span class="p">(</span><span class="n">_inputs</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;hyperparameter_name_2&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}})</span>

                        <span class="k">if</span> <span class="n">_run_id</span><span class="p">:</span>
                            <span class="n">selected_run</span> <span class="o">=</span> <span class="n">run_handler</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">_run_id</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">selected_run</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="c1"># How to update only parameters which have a dependency?</span>
                        <span class="n">user_dependencies_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_dependency_inputs</span><span class="p">(</span>
                            <span class="n">selected_run</span><span class="p">,</span> <span class="n">_previous_inputs</span><span class="p">,</span> <span class="n">_inputs</span>
                        <span class="p">)</span>

                        <span class="c1"># Update dict</span>
                        <span class="c1"># dict.update() removes keys, so our own method is used to do so</span>
                        <span class="n">update_dict</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">user_dependencies_inputs</span><span class="p">)</span>  <span class="c1"># inplace operation</span>

                <span class="c1"># Let&#39;s cast the inputs</span>
                <span class="n">inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cast_inputs</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

                <span class="c1"># From dict to list</span>
                <span class="n">inputs_list_from_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_to_list</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">previous_inputs</span> <span class="o">=</span> <span class="n">inputs</span>

                <span class="k">return</span> <span class="n">inputs_list_from_dict</span>

        <span class="c1"># Register modal for raw data here</span>
        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
            <span class="p">[</span>
                <span class="n">Output</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;raw_data&quot;</span><span class="p">),</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
                <span class="n">Output</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;raw_data_content&quot;</span><span class="p">),</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>
            <span class="p">],</span>
            <span class="n">Input</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;show_raw_data&quot;</span><span class="p">),</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">),</span>
            <span class="n">State</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;raw_data&quot;</span><span class="p">),</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">toggle_raw_data_modal</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">is_open</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Toggle the raw data modal.&quot;&quot;&quot;</span>
            <span class="n">code</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">out</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_outputs</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># Make list</span>
                    <span class="n">code</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>

                <span class="k">return</span> <span class="ow">not</span> <span class="n">is_open</span><span class="p">,</span> <span class="n">code</span>

            <span class="k">return</span> <span class="n">is_open</span><span class="p">,</span> <span class="n">code</span>

        <span class="c1"># Register modal for help here</span>
        <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>  <span class="c1"># type: ignore</span>
            <span class="p">[</span>
                <span class="n">Output</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">),</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
            <span class="p">],</span>
            <span class="n">Input</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;show_help&quot;</span><span class="p">),</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">),</span>
            <span class="n">State</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;help&quot;</span><span class="p">),</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">toggle_help_modal</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">is_open</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Toggle the help modal.&quot;&quot;&quot;</span>
            <span class="k">if</span> <span class="n">n</span><span class="p">:</span>
                <span class="k">return</span> <span class="ow">not</span> <span class="n">is_open</span>
            <span class="k">return</span> <span class="n">is_open</span>

        <span class="c1"># Register callback to click on configurations</span>
        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span><span class="p">:</span>
            <span class="n">internal_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_internal_output_id</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>

            <span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
                <span class="n">Output</span><span class="p">(</span><span class="n">internal_id</span><span class="p">,</span> <span class="s2">&quot;clickData&quot;</span><span class="p">),</span>
                <span class="n">Input</span><span class="p">(</span><span class="n">internal_id</span><span class="p">,</span> <span class="s2">&quot;clickData&quot;</span><span class="p">),</span>
            <span class="p">)</span>  <span class="c1"># type: ignore</span>
            <span class="k">def</span><span class="w"> </span><span class="nf">go_to_configuration</span><span class="p">(</span><span class="n">click_data</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">                </span><span class="sd">&quot;&quot;&quot;Open link from hovertext.&quot;&quot;&quot;</span>
                <span class="k">if</span> <span class="n">click_data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># Get hovertext</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">hovertext</span> <span class="o">=</span> <span class="n">click_data</span><span class="p">[</span><span class="s2">&quot;points&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;hovertext&quot;</span><span class="p">]</span>

                        <span class="c1"># Now extract the link from href</span>
                        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;&lt;a href=&#39;(.+?)&#39;&quot;</span><span class="p">,</span> <span class="n">hovertext</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
                            <span class="n">link</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
                            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                        <span class="k">pass</span>

                <span class="k">return</span> <span class="kc">None</span></div>


    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_inputs_changed</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">last_inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the inputs have changed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inputs : Dict[str, Dict[str, str]]</span>
<span class="sd">            Current inputs.</span>
<span class="sd">        last_inputs : Dict[str, Dict[str, str]]</span>
<span class="sd">            Last inputs.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[bool, bool]</span>
<span class="sd">            Whether input and filter inputs have changed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check if last_inputs are the same as the given inputs.</span>
        <span class="n">inputs_changed</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">filters_changed</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># If only filters changed, there is no need to</span>
        <span class="c1"># calculate the results again.</span>
        <span class="k">if</span> <span class="n">last_inputs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">id</span> <span class="o">==</span> <span class="s2">&quot;run&quot;</span><span class="p">:</span>
                        <span class="k">continue</span>

                <span class="k">if</span> <span class="n">inputs</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span> <span class="o">!=</span> <span class="n">last_inputs</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">attribute</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">filter</span><span class="p">:</span>
                        <span class="n">inputs_changed</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">filters_changed</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">inputs_changed</span><span class="p">,</span> <span class="n">filters_changed</span>

    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_process_raw_outputs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">raw_outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process the raw outputs and update the layout.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inputs : Dict[str, Dict[str, str]]</span>
<span class="sd">            The inputs for the passed runs.</span>
<span class="sd">        raw_outputs : Dict[str, Any]</span>
<span class="sd">            The raw outputs to process.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Any</span>
<span class="sd">            The processed outputs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deepcave</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_handler</span>

        <span class="c1"># Use raw outputs to update our layout</span>
        <span class="n">passed_runs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">],</span> <span class="n">AbstractRun</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
            <span class="n">passed_runs</span> <span class="o">=</span> <span class="n">run_handler</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">])</span>
            <span class="n">passed_outputs</span> <span class="o">=</span> <span class="n">raw_outputs</span><span class="p">[</span><span class="n">passed_runs</span><span class="o">.</span><span class="n">id</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">passed_runs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_runs</span>
            <span class="n">passed_outputs</span> <span class="o">=</span> <span class="n">raw_outputs</span>

        <span class="c1"># Clean inputs</span>
        <span class="n">cleaned_inputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_clean_inputs</span><span class="p">(</span><span class="n">inputs</span><span class="p">)</span>

        <span class="c1"># passed runs could be a list, but load outputs not</span>
        <span class="c1"># accept lists, but expect single runs</span>
        <span class="n">outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">load_outputs</span><span class="p">(</span><span class="n">passed_runs</span><span class="p">,</span> <span class="n">cleaned_inputs</span><span class="p">,</span> <span class="n">passed_outputs</span><span class="p">)</span>  <span class="c1"># type: ignore # noqa: E501</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Raw outputs processed successfully.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">outputs</span> <span class="o">==</span> <span class="n">PreventUpdate</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PreventUpdate</span><span class="p">()</span>

        <span class="c1"># Map outputs here because it may be that the outputs are</span>
        <span class="c1"># differently sorted than the values were registered.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">outputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict_to_list</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">outputs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">outputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">outputs</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outputs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">outputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">outputs</span>

    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_list_to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">input</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Map the given values to a dict.</span>

<span class="sd">        Regarding the sorting from either self.inputs or self.outputs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        values : Iterable[str]</span>
<span class="sd">            Values to map.</span>
<span class="sd">        input : bool, optional</span>
<span class="sd">            Whether the data should be linked to the input or outputs. By default True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Dict[str, str]]</span>
<span class="sd">            Dictionary containing the mapping information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># This is necessary, because of the conditional type of order</span>
        <span class="n">order</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>

        <span class="k">if</span> <span class="nb">input</span><span class="p">:</span>
            <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span>

        <span class="n">mapping</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mapping</span><span class="p">:</span>
                <span class="n">mapping</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="n">mapping</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="n">mapping</span>

    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_dict_to_list</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="nb">input</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Map the given dict to a list.</span>

<span class="sd">        Respecting the sorting from either self.inputs or self.outputs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        d : Dict[str, Dict[str, str]]</span>
<span class="sd">            Dictionary to transform.</span>
<span class="sd">        input : bool, optional</span>
<span class="sd">            Whether the data should be linked to the input or outputs. By default False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Optional[str]]</span>
<span class="sd">            Sorted list from the given dict.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># This is necessary, because of the conditional type of order</span>
        <span class="n">order</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span>

        <span class="k">if</span> <span class="nb">input</span><span class="p">:</span>
            <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">outputs</span>

        <span class="n">result</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span> <span class="ow">in</span> <span class="n">order</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">input</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">+=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_dict_as_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">remove_filters</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert a dictionary to a key. Only ids from self.inputs are considered.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        d : Dict[str, Any]</span>
<span class="sd">            Dictionary to get the key from.</span>
<span class="sd">        remove_filters : bool, optional</span>
<span class="sd">            Option whether the filters should be included or not. By default False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Optional[str]</span>
<span class="sd">            Key as string from the given dictionary. Returns none if `d` is not a dictionary.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        TypeError</span>
<span class="sd">            If `d` is not a dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;d must be a dictionary.&quot;</span><span class="p">)</span>

        <span class="n">new_d</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">remove_filters</span><span class="p">:</span>
            <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="nb">filter</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">filter</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">new_d</span><span class="p">:</span>
                        <span class="k">del</span> <span class="n">new_d</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">string_to_hash</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">new_d</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_cast_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cast the inputs based on `self.inputs`.</span>

<span class="sd">        Background is that dash always casts integers/booleans to strings.</span>
<span class="sd">        This method ensures that the correct types are returned.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inputs : Dict[str, Dict[str, str]]</span>
<span class="sd">            Inputs, which should be casted.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Dict[str, str]]</span>
<span class="sd">            Casted inputs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">casted_inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">attributes</span> <span class="ow">in</span> <span class="n">inputs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="c1"># Find corresponding input</span>
                <span class="nb">type</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">for</span> <span class="n">id_</span><span class="p">,</span> <span class="n">attribute_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">type_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">id</span> <span class="o">==</span> <span class="n">id_</span> <span class="ow">and</span> <span class="n">attribute</span> <span class="o">==</span> <span class="n">attribute_</span><span class="p">:</span>
                        <span class="nb">type</span> <span class="o">=</span> <span class="n">type_</span>
                        <span class="k">break</span>

                <span class="n">value</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">type</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

                <span class="n">casted_inputs</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">return</span> <span class="n">casted_inputs</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_clean_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Clean the given inputs s.t. only the first value is used.</span>

<span class="sd">        Also, boolean values are cast to booleans.</span>

<span class="sd">        Example</span>
<span class="sd">        -------</span>
<span class="sd">        You register the following input:</span>
<span class="sd">        ```</span>
<span class="sd">        dbc.Select(id=register(&quot;objective_name&quot;, [&quot;value&quot;, &quot;options&quot;]))</span>
<span class="sd">        ```</span>
<span class="sd">        However, in the `process` or `load_outputs` method you don&#39;t need `options`.</span>
<span class="sd">        Instead of writing `inputs[&quot;objective_name&quot;][&quot;value&quot;]` you can simply write</span>
<span class="sd">        `inputs[&quot;objective_name&quot;]`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inputs : Dict[str, Any]</span>
<span class="sd">            Inputs to clean.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Any]</span>
<span class="sd">            Cleaned inputs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">used_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cleaned_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
            <span class="c1"># Since self.inputs is ordered, the first occurring attribute is used and</span>
            <span class="c1"># the id is added so it is not used again.</span>
            <span class="k">if</span> <span class="nb">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">used_ids</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">inputs</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="n">attribute</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="s2">&quot;true&quot;</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="s2">&quot;false&quot;</span><span class="p">:</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="kc">False</span>

                <span class="n">cleaned_inputs</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">used_ids</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">id</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">cleaned_inputs</span>

    <span class="nd">@property</span>
    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">runs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the runs as a list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[AbstractRun]</span>
<span class="sd">            The list with the runs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deepcave</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_handler</span>

        <span class="k">return</span> <span class="n">run_handler</span><span class="o">.</span><span class="n">get_runs</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">groups</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Group</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the groups as a list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Group]</span>
<span class="sd">            The list with the groups.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deepcave</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_handler</span>

        <span class="k">return</span> <span class="n">run_handler</span><span class="o">.</span><span class="n">get_groups</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">all_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all runs and include the groups as a list.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[AbstractRun]</span>
<span class="sd">            The list with all runs and included groups.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deepcave</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_handler</span>

        <span class="k">return</span> <span class="n">run_handler</span><span class="o">.</span><span class="n">get_runs</span><span class="p">(</span><span class="n">include_groups</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="Plugin.__call__">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.__call__">[docs]</a>
    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">render_button</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Component</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the components for the plugin.</span>

<span class="sd">        Basically, all blocks and elements of the plugin are stacked-up here.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        render_button : bool, optional</span>
<span class="sd">            Whether to render the button or not. By default False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Component]</span>
<span class="sd">            Layout as list of components.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        NotMergeableError</span>
<span class="sd">            If runs are not compatible.</span>
<span class="sd">        FileNotFoundError</span>
<span class="sd">            If the help file can not be found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deepcave</span><span class="w"> </span><span class="kn">import</span> <span class="n">notification</span>

        <span class="c1"># Reset runtime variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">previous_inputs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_outputs</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">components</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">help</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">doc_path</span> <span class="o">=</span> <span class="n">DOC_ROOT</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">help</span>
            <span class="n">components</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">html</span><span class="o">.</span><span class="n">Span</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
                            <span class="p">[</span><span class="n">html</span><span class="o">.</span><span class="n">I</span><span class="p">(</span><span class="n">className</span><span class="o">=</span><span class="s2">&quot;far fa-question-circle&quot;</span><span class="p">)],</span>
                            <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;show_help&quot;</span><span class="p">),</span>
                            <span class="n">href</span><span class="o">=</span><span class="n">doc_path</span><span class="p">,</span>
                            <span class="n">target</span><span class="o">=</span><span class="s2">&quot;_blank&quot;</span><span class="p">,</span>
                            <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;float&quot;</span><span class="p">:</span> <span class="s2">&quot;right&quot;</span><span class="p">},</span>
                            <span class="n">color</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
                            <span class="n">outline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                            <span class="n">n_clicks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="p">),</span>
                    <span class="p">]</span>
                <span class="p">),</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">components</span> <span class="o">+=</span> <span class="p">[</span><span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check_runs_compatibility</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">all_runs</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">NotMergeableError</span> <span class="k">as</span> <span class="n">message</span><span class="p">:</span>
            <span class="n">notification</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">components</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
            <span class="n">run_input_layout</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">get_run_input_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_input</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">run_input_layout</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">input_layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">get_input_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_input</span><span class="p">)</span>

        <span class="n">separator_layout</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">input_layout</span> <span class="ow">and</span> <span class="n">run_input_layout</span><span class="p">:</span>
            <span class="n">separator_layout</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">Hr</span><span class="p">())</span>

        <span class="n">input_control_layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
            <span class="n">style</span><span class="o">=</span><span class="p">{}</span> <span class="k">if</span> <span class="n">render_button</span> <span class="k">else</span> <span class="p">{</span><span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">},</span>
            <span class="n">className</span><span class="o">=</span><span class="s2">&quot;mt-3 clearfix&quot;</span><span class="p">,</span>
            <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
                    <span class="n">children</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">button_caption</span><span class="p">,</span>
                    <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;update-button&quot;</span><span class="p">),</span>
                <span class="p">),</span>
            <span class="p">],</span>
        <span class="p">)</span>

        <span class="c1"># It always has to be rendered, because of the button.</span>
        <span class="c1"># Button tells us if the page was just loaded.</span>
        <span class="n">components</span> <span class="o">+=</span> <span class="p">[</span>
            <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">-input&quot;</span><span class="p">,</span>
                <span class="n">className</span><span class="o">=</span><span class="s2">&quot;shadow-sm p-3 mb-3 bg-white rounded-lg&quot;</span><span class="p">,</span>
                <span class="n">children</span><span class="o">=</span><span class="n">run_input_layout</span>
                <span class="o">+</span> <span class="n">separator_layout</span>
                <span class="o">+</span> <span class="n">input_layout</span>
                <span class="o">+</span> <span class="p">[</span><span class="n">input_control_layout</span><span class="p">],</span>
                <span class="n">style</span><span class="o">=</span><span class="p">{}</span>
                <span class="k">if</span> <span class="n">render_button</span> <span class="ow">or</span> <span class="n">input_layout</span> <span class="ow">or</span> <span class="n">run_input_layout</span>
                <span class="k">else</span> <span class="p">{</span><span class="s2">&quot;display&quot;</span><span class="p">:</span> <span class="s2">&quot;none&quot;</span><span class="p">},</span>
            <span class="p">)</span>
        <span class="p">]</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">register_in</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            Register the given input.</span>

<span class="sd">            Note</span>
<span class="sd">            ----</span>
<span class="sd">            For more information, see &#39;register_input&#39;.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            a : str</span>
<span class="sd">                Specifies the id of the input.</span>
<span class="sd">            b : Union[List[str], str]</span>
<span class="sd">                Attributes which should be passed to the (dash) component, by default (&quot;value&quot;,).</span>

<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            str</span>
<span class="sd">                Unique id for the input and plugin.</span>
<span class="sd">                This is necessary because ids are defined globally.</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">register_input</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">filter_layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">get_filter_layout</span><span class="p">(</span><span class="n">register_in</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filter_layout</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">components</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">-filter&quot;</span><span class="p">,</span>
                    <span class="n">className</span><span class="o">=</span><span class="s2">&quot;shadow-sm p-3 mb-3 bg-white rounded-lg&quot;</span><span class="p">,</span>
                    <span class="n">children</span><span class="o">=</span><span class="n">filter_layout</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">]</span>

        <span class="n">output_layout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">get_output_layout</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_output</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">output_layout</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">components</span> <span class="o">+=</span> <span class="p">[</span>
                <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">-output&quot;</span><span class="p">,</span>
                    <span class="n">className</span><span class="o">=</span><span class="s2">&quot;shadow-sm p-3 bg-white rounded-lg loading-container&quot;</span><span class="p">,</span>
                    <span class="n">children</span><span class="o">=</span><span class="n">output_layout</span><span class="p">,</span>
                    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
                <span class="p">)</span>
            <span class="p">]</span>

        <span class="n">modal</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
                    <span class="s2">&quot;Raw Data&quot;</span><span class="p">,</span>
                    <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;show_raw_data&quot;</span><span class="p">),</span>
                    <span class="n">className</span><span class="o">=</span><span class="s2">&quot;mt-3&quot;</span><span class="p">,</span>
                    <span class="n">n_clicks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">Modal</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">ModalHeader</span><span class="p">(</span>
                            <span class="p">[</span>
                                <span class="n">dbc</span><span class="o">.</span><span class="n">ModalTitle</span><span class="p">(</span><span class="s2">&quot;Raw Data&quot;</span><span class="p">),</span>
                                <span class="n">dcc</span><span class="o">.</span><span class="n">Clipboard</span><span class="p">(</span>
                                    <span class="n">target_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;raw_data_content&quot;</span><span class="p">),</span>
                                    <span class="n">style</span><span class="o">=</span><span class="p">{</span>
                                        <span class="s2">&quot;fontSize&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
                                        <span class="s2">&quot;marginLeft&quot;</span><span class="p">:</span> <span class="s2">&quot;0.5rem&quot;</span><span class="p">,</span>
                                    <span class="p">},</span>
                                <span class="p">),</span>
                            <span class="p">]</span>
                        <span class="p">),</span>
                        <span class="n">dbc</span><span class="o">.</span><span class="n">ModalBody</span><span class="p">(</span>
                            <span class="p">[</span>
                                <span class="n">dbc</span><span class="o">.</span><span class="n">Textarea</span><span class="p">(</span>
                                    <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;raw_data_content&quot;</span><span class="p">),</span>
                                    <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                                    <span class="n">readonly</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                    <span class="n">rows</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
                                <span class="p">),</span>
                            <span class="p">]</span>
                        <span class="p">),</span>
                    <span class="p">],</span>
                    <span class="nb">id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_internal_id</span><span class="p">(</span><span class="s2">&quot;raw_data&quot;</span><span class="p">),</span>
                    <span class="n">size</span><span class="o">=</span><span class="s2">&quot;lg&quot;</span><span class="p">,</span>
                    <span class="n">scrollable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">is_open</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="n">components</span> <span class="o">+=</span> <span class="p">[</span><span class="n">modal</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">components</span></div>


<div class="viewcode-block" id="Plugin.get_run_input_layout">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.get_run_input_layout">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_run_input_layout</span><span class="p">(</span><span class="n">register</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Component</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate the run selection input.</span>

<span class="sd">        This is only the case if `activate_run_selection` is True.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        register : Callable</span>
<span class="sd">            The register method to register (user) variables.</span>
<span class="sd">            For more information, see &#39;register_input&#39;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Component</span>
<span class="sd">            The layout of the run selection input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">dbc</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="n">register</span><span class="p">(</span><span class="s2">&quot;run&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="s2">&quot;options&quot;</span><span class="p">]),</span>
                    <span class="n">placeholder</span><span class="o">=</span><span class="s2">&quot;Select run ...&quot;</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="Plugin.load_run_inputs">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.load_run_inputs">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_run_inputs</span><span class="p">(</span>
        <span class="n">runs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">],</span>
        <span class="n">groups</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Group</span><span class="p">],</span>
        <span class="n">check_run_compatibility</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">AbstractRun</span><span class="p">],</span> <span class="nb">bool</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the options for `get_run_input_layout`.</span>

<span class="sd">        Both runs and groups are displayed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        runs : List[AbstractRun]</span>
<span class="sd">            The runs to display.</span>
<span class="sd">        groups : List[Group]</span>
<span class="sd">            The groups to display.</span>
<span class="sd">        check_run_compatibility : Callable[[AbstractRun], bool]</span>
<span class="sd">            If a single run is compatible. If not, the run is not shown.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Any]</span>
<span class="sd">            Both runs and groups, separated by a separator.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">disabled</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">check_run_compatibility</span><span class="p">(</span><span class="n">run</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">run_path</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">path</span>
                    <span class="k">if</span> <span class="n">run_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">run_name</span> <span class="o">=</span> <span class="n">run_path</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="n">run</span><span class="o">.</span><span class="n">name</span>
                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                    <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run_name</span><span class="p">)</span>
                    <span class="n">disabled</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
                    <span class="k">pass</span>

        <span class="n">added_group_label</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">check_run_compatibility</span><span class="p">(</span><span class="n">run</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">added_group_label</span><span class="p">:</span>
                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Groups&quot;</span><span class="p">)</span>
                    <span class="n">disabled</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                    <span class="n">added_group_label</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
                <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="n">disabled</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;run&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;options&quot;</span><span class="p">:</span> <span class="n">get_select_options</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">values</span><span class="p">,</span> <span class="n">disabled</span><span class="o">=</span><span class="n">disabled</span><span class="p">),</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span></div>


<div class="viewcode-block" id="Plugin.get_selected_runs">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.get_selected_runs">[docs]</a>
    <span class="nd">@interactive</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_selected_runs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse selected runs from inputs.</span>

<span class="sd">        If self.activate_run_selection is set, return only selected run. Otherwise, return all</span>
<span class="sd">        possible runs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inputs : Dict[str, Any]</span>
<span class="sd">            The inputs to parse.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[AbstractRun]</span>
<span class="sd">            The selected runs.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        PreventUpdate</span>
<span class="sd">            If `activate_run_selection` is set but `run` is not available.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">deepcave</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_handler</span>

        <span class="c1"># Special case: If run selection is active</span>
        <span class="c1"># Don&#39;t update anything if the inputs haven&#39;t changed</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">run_id</span> <span class="o">:=</span> <span class="n">inputs</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">])</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">PreventUpdate</span><span class="p">()</span>

            <span class="c1"># Update runs</span>
            <span class="n">run</span> <span class="o">=</span> <span class="n">run_handler</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run_id</span><span class="p">)</span>

            <span class="c1"># Also:</span>
            <span class="c1"># Remove `run` from inputs_key because</span>
            <span class="c1"># The runs name does not need to be included</span>
            <span class="n">_inputs</span> <span class="o">=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">del</span> <span class="n">_inputs</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">]</span>

            <span class="k">return</span> <span class="p">[</span><span class="n">run</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_runs</span></div>


<div class="viewcode-block" id="Plugin.load_inputs">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.load_inputs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the content for the defined inputs in `get_input_layout` and `get_filter_layout`.</span>

<span class="sd">        This method is necessary to pre-load contents for the inputs. So, if the plugin is</span>
<span class="sd">        called for the first time or there are no results in the cache, the plugin gets its</span>
<span class="sd">        content from this method.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Any]</span>
<span class="sd">            Content to be filled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{}</span></div>


<div class="viewcode-block" id="Plugin.load_dependency_inputs">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.load_dependency_inputs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_dependency_inputs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">run</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">]]],</span>
        <span class="n">previous_inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the content as in &#39;load_inputs&#39; but called after inputs have changed.</span>

<span class="sd">        Provides a lot of flexibility.</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        Only the changes have to be returned. The returned dictionary will be merged with the</span>
<span class="sd">        inputs.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        run : Optional[Union[AbstractRun, List[AbstractRun]]], optional</span>
<span class="sd">            The selected run from the user. In case of `activate_run_selection`, only one run</span>
<span class="sd">            is passed. Defaults to None.</span>
<span class="sd">        previous_inputs : Dict[str, Any]</span>
<span class="sd">            Previous content of the inputs.</span>
<span class="sd">        inputs : Dict[str, Any]</span>
<span class="sd">            Current content of the inputs.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Any]</span>
<span class="sd">            Dictionary with the changes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">inputs</span></div>


<div class="viewcode-block" id="Plugin.get_input_layout">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.get_input_layout">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_input_layout</span><span class="p">(</span><span class="n">register</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Component</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Layout for the input block.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        register : Callable</span>
<span class="sd">            The register method to register (user) variables.</span>
<span class="sd">            For more information, see &#39;register_input&#39;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Component]</span>
<span class="sd">            Layouts for the input block.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="Plugin.get_filter_layout">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.get_filter_layout">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_filter_layout</span><span class="p">(</span><span class="n">register</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Component</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Layout for the filter block.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        register : Callable</span>
<span class="sd">            The register method to register (user) variables.</span>
<span class="sd">            For more information, see &#39;register_input&#39;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Component]</span>
<span class="sd">            Layouts for the filter block.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="Plugin.get_output_layout">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.get_output_layout">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_output_layout</span><span class="p">(</span><span class="n">register</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Component</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Component</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Layout for the output block.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        register : Callable</span>
<span class="sd">            The register method to register outputs.</span>
<span class="sd">            For more information, see &#39;register_input&#39;.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[Component, List[Component]]</span>
<span class="sd">            Layouts for the output block.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="Plugin.load_outputs">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.load_outputs">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_outputs</span><span class="p">(</span>
        <span class="n">runs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">AbstractRun</span><span class="p">]],</span>
        <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span>
        <span class="n">outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Component</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Component</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read in the raw data and prepare them for the layout.</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        The passed `inputs` are cleaned and therefore differs compared to `load_inputs` or</span>
<span class="sd">        `load_dependency_inputs`.</span>
<span class="sd">        Inputs are cleaned s.t. only the first value is used.</span>
<span class="sd">        Also, boolean values are casted to booleans.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        runs : Union[AbstractRun, Dict[str, AbstractRun]]</span>
<span class="sd">            All selected runs. If `activate_run_selection` is set, only the selected run is</span>
<span class="sd">            returned.</span>
<span class="sd">        inputs : Dict[str, Dict[str, str]]</span>
<span class="sd">            Input and filter values from the user.</span>
<span class="sd">        outputs : Dict[str, Union[str, Dict[str, str]]]</span>
<span class="sd">            Raw outputs from the runs. If `activate_run_selection` is set,</span>
<span class="sd">            a Dict[str, str] is returned.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[Component, List[Component]]</span>
<span class="sd">            The components must be in the same position as defined in `get_output_layout`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[]</span></div>


<div class="viewcode-block" id="Plugin.process">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.process">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="n">run</span><span class="p">:</span> <span class="n">AbstractRun</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return raw data based on a run and input data.</span>

<span class="sd">        Warning</span>
<span class="sd">        -------</span>
<span class="sd">        The returned data must be JSON serializable.</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        The passed `inputs` are cleaned and therefore differs compared to `load_inputs` or</span>
<span class="sd">        `load_dependency_inputs`. Inputs are cleaned s.t. only the first value is used.</span>
<span class="sd">        Also, boolean values are casted to booleans.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        run : AbstractRun</span>
<span class="sd">            The run to process.</span>
<span class="sd">        inputs : Dict[str, Any]</span>
<span class="sd">            Input data.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Any]</span>
<span class="sd">            Serialized dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{}</span></div>


<div class="viewcode-block" id="Plugin.generate_outputs">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.generate_outputs">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_outputs</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">runs</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">]],</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check whether run selection is active and accepts either one or multiple runs at once.</span>

<span class="sd">        Calls `process` internally.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        runs : Union[AbstractRun, List[AbstractRun]]</span>
<span class="sd">            Run or runs to process.</span>
<span class="sd">        inputs : Dict[str, Any]</span>
<span class="sd">            Input data. Only &quot;real&quot; inputs (not &quot;filter&quot; inputs) are necessary.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[Dict[str, Any], Dict[str, Dict[str, Any]]]</span>
<span class="sd">            Returns a data dictionary with the same outputs as `process`.</span>
<span class="sd">            If `activate_run_selection` is set, a Dict[str, Dict[str, Any]] is returned. The first</span>
<span class="sd">            dictionary is keyed by the `run.id`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">activate_run_selection</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">runs</span><span class="p">,</span> <span class="n">AbstractRun</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">runs</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s2">&quot;The method `generate_outputs` accepts only one run because&quot;</span>
                    <span class="s2">&quot;`activate_run_selection` is set.&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">runs</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">runs</span><span class="p">,</span> <span class="n">AbstractRun</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                        <span class="s2">&quot;The method `generate_outputs` accepts either one or multiple runs.&quot;</span>
                    <span class="p">)</span>

                <span class="n">runs</span> <span class="o">=</span> <span class="p">[</span><span class="n">runs</span><span class="p">]</span>

            <span class="n">outputs</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
                <span class="n">outputs</span><span class="p">[</span><span class="n">run</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">outputs</span></div>


<div class="viewcode-block" id="Plugin.generate_inputs">
<a class="viewcode-back" href="../../api/deepcave.plugins.html#deepcave.plugins.Plugin.generate_inputs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate inputs for the `process` and `load_outputs` required for api mode.</span>

<span class="sd">        The arguments are validated against the input schema.</span>

<span class="sd">        Note</span>
<span class="sd">        ----</span>
<span class="sd">        Arguments are only available at runtime. Therefore, no api can be shown beforehand.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        kwargs : Any</span>
<span class="sd">            Additional keyword arguments.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Any]</span>
<span class="sd">            The inputs for the run.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If an unknown input is passed.</span>
<span class="sd">            If an input is missing.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mapping</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">attribute</span><span class="p">,</span> <span class="o">*</span><span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inputs</span><span class="p">:</span>
            <span class="c1"># Since `self.inputs` is ordered, the first occurring attribute is used and</span>
            <span class="c1"># the id is added, so it is not used again.</span>
            <span class="k">if</span> <span class="nb">id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">mapping</span><span class="p">:</span>
                <span class="n">mapping</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">attribute</span>

        <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">mapping</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">:</span>
                    <span class="n">inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

                <span class="n">inputs</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mapping</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Unknown input: </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">. Valid inputs are: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">mapping</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span><span class="si">}</span><span class="s2">.&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown input: </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">. No input needs to be passed.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">mapping</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">!=</span> <span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Missing inputs: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">mapping</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nb">set</span><span class="p">(</span><span class="n">inputs</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">inputs</span></div>
</div>

</pre></div>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.9ea38e314b9e6d9dab77.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright Copyright 2025, S. Segel and H. Graf and E. Bergman and K. Thieme and L. Fehring and A. Tornede and R. Sass and A. Biedenkapp and F. Hutter and M. Lindauer.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a>
7.4.7. Template is modified version of <a
href="https://pydata-sphinx-theme.readthedocs.io">PyData Sphinx Theme</a>. <br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>