<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>deepcave.runs &#8212; DeepCAVE Documentation 1.3.4 documentation</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ac9c05f7c49ca1e1f876c6e36360ea26.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=2eb4fb78" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    
  <link rel="preload" as="script" href="../../_static/js/index.9ea38e314b9e6d9dab77.js">

    <script src="../../_static/documentation_options.js?v=2b7d2ab1"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
  <a class="navbar-brand" href="../../index.html">
  <!-- <p class="title">DeepCAVE Documentation</p> -->
  </a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/automl/DeepCAVE" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/automl_org?lang=de" rel="noopener" target="_blank" title="Twitter">
            <span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label>
          </a>
        </li>
      </ul>
      </div>
      
      <div class="navbar-end-item">
        <div class="dropdown mt-1">
    <button type="button" class="btn btn-secondary btn-md navbar-btn dropdown-toggle" id="dLabelMore"
        data-toggle="dropdown">
        v1.3.4
        <span class="caret"></span>
    </button>
    <div class="dropdown-menu list-group-flush py-0" aria-labelledby="dLabelMore">
        <a class="list-group-item list-group-item-action" href="#">v1.3.4</a>
    </div>
</div>
      </div>
      
      <div class="navbar-end-item">
        <form class="bd-search align-items-center" action="../../search.html" method="get" style="width: 100%;">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control btn btn-md" name="q" id="search-input"
    placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off">
</form>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><h4 class="mt-0 mb-0"><a href="../../index.html">DeepCAVE Documentation</a></h4>
<div class="mb-3">v1.3.4</div><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../examples/index.html">
   Examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../examples/api/index.html">
     API
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/api/pdp.html">
       Partial Dependencies
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/api/parallel_coordinates.html">
       Parallel Coordinates
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/api/importances.html">
       Importances
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/api/ablation_paths.html">
       Ablation Paths
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../examples/record/index.html">
     Record
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/record/minimal.html">
       Record Minimal Run
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/record/digits_sklearn.html">
       Multi-Layer Perceptron via Sklearn
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../examples/record/mnist_pytorch.html">
       Multi-Layer Perceptron via PyTorch
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../plugins/index.html">
   Displaying Data with Plugins
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/overview.html">
     Overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/configurations.html">
     Configurations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/configuration_footprint.html">
     Configuration Footprint
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/cost_over_time.html">
     Cost Over Time
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/pareto_front.html">
     Pareto Front
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/budget_correlation.html">
     Budget Correlation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/importances.html">
     Importances
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/ablation_paths.html">
     Ablation Paths
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/configuration_cube.html">
     Configuration Cube
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/parallel_coordinates.html">
     Parallel Coordinates
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/partial_dependencies.html">
     Partial Dependencies
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/symbolic_explanations.html">
     Symbolic Explanations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../plugins/custom_plugins.html">
     Adding a Plugin
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../converters/index.html">
   Runs and Converters
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/smac.html">
     SMAC
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/amltk.html">
     AMLTK
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/optuna.html">
     Optuna
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/bohb.html">
     BOHB
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/deepcave.html">
     DeepCAVE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/dataframe.html">
     Pandas DataFrame
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../converters/custom_converters.html">
     Adding a Converter
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../how_to_contribute.html">
   How to Contribute
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../api.html">
   API References
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.runs.html">
     deepcave.runs
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/deepcave.runs.converters.html">
       deepcave.runs.converters
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
      <label for="toctree-checkbox-8">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.amltk.html">
         deepcave.runs.converters.amltk
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.bohb.html">
         deepcave.runs.converters.bohb
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.dataframe.html">
         deepcave.runs.converters.dataframe
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.deepcave.html">
         deepcave.runs.converters.deepcave
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.optuna.html">
         deepcave.runs.converters.optuna
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.smac3v1.html">
         deepcave.runs.converters.smac3v1
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.runs.converters.smac3v2.html">
         deepcave.runs.converters.smac3v2
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.exceptions.html">
       deepcave.runs.exceptions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.group.html">
       deepcave.runs.group
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.handler.html">
       deepcave.runs.handler
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.objective.html">
       deepcave.runs.objective
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.recorder.html">
       deepcave.runs.recorder
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.run.html">
       deepcave.runs.run
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.status.html">
       deepcave.runs.status
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.runs.trial.html">
       deepcave.runs.trial
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.plugins.html">
     deepcave.plugins
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.plugins.budget.html">
       deepcave.plugins.budget
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.plugins.dynamic.html">
       deepcave.plugins.dynamic
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.html">
       deepcave.plugins.hyperparameter
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
      <label for="toctree-checkbox-10">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.ablation_paths.html">
         deepcave.plugins.hyperparameter.ablation_paths
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.configuration_cube.html">
         deepcave.plugins.hyperparameter.configuration_cube
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.importances.html">
         deepcave.plugins.hyperparameter.importances
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.parallel_coordinates.html">
         deepcave.plugins.hyperparameter.parallel_coordinates
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.pdp.html">
         deepcave.plugins.hyperparameter.pdp
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.hyperparameter.symbolic_explanations.html">
         deepcave.plugins.hyperparameter.symbolic_explanations
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.plugins.objective.html">
       deepcave.plugins.objective
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.plugins.static.html">
       deepcave.plugins.static
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/deepcave.plugins.summary.html">
       deepcave.plugins.summary
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
      <label for="toctree-checkbox-11">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.summary.configurations.html">
         deepcave.plugins.summary.configurations
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.summary.footprint.html">
         deepcave.plugins.summary.footprint
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.plugins.summary.overview.html">
         deepcave.plugins.summary.overview
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.layouts.html">
     deepcave.layouts
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.layouts.header.html">
       deepcave.layouts.header
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.layouts.not_found.html">
       deepcave.layouts.not_found
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.layouts.sidebar.html">
       deepcave.layouts.sidebar
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.evaluators.html">
     deepcave.evaluators
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.ablation.html">
       deepcave.evaluators.ablation
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../api/deepcave.evaluators.epm.html">
       deepcave.evaluators.epm
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
      <label for="toctree-checkbox-14">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.evaluators.epm.fanova_forest.html">
         deepcave.evaluators.epm.fanova_forest
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.evaluators.epm.random_forest.html">
         deepcave.evaluators.epm.random_forest
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.evaluators.epm.random_forest_surrogate.html">
         deepcave.evaluators.epm.random_forest_surrogate
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../api/deepcave.evaluators.epm.utils.html">
         deepcave.evaluators.epm.utils
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.fanova.html">
       deepcave.evaluators.fanova
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.footprint.html">
       deepcave.evaluators.footprint
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.lpi.html">
       deepcave.evaluators.lpi
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.mo_ablation.html">
       deepcave.evaluators.mo_ablation
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.mo_fanova.html">
       deepcave.evaluators.mo_fanova
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.evaluators.mo_lpi.html">
       deepcave.evaluators.mo_lpi
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../api/deepcave.utils.html">
     deepcave.utils
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
    <label for="toctree-checkbox-15">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.cache.html">
       deepcave.utils.cache
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.cast.html">
       deepcave.utils.cast
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.compression.html">
       deepcave.utils.compression
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.configs.html">
       deepcave.utils.configs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.configspace.html">
       deepcave.utils.configspace
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.converters.html">
       deepcave.utils.converters
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.dash.html">
       deepcave.utils.dash
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.data_structures.html">
       deepcave.utils.data_structures
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.docs.html">
       deepcave.utils.docs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.files.html">
       deepcave.utils.files
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.hash.html">
       deepcave.utils.hash
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.layout.html">
       deepcave.utils.layout
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.logs.html">
       deepcave.utils.logs
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.multi_objective_importance.html">
       deepcave.utils.multi_objective_importance
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.notification.html">
       deepcave.utils.notification
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.run_caches.html">
       deepcave.utils.run_caches
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.styled_plotty.html">
       deepcave.utils.styled_plotty
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.symbolic_regression.html">
       deepcave.utils.symbolic_regression
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.url.html">
       deepcave.utils.url
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../api/deepcave.utils.util.html">
       deepcave.utils.util
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../faq.html">
   Frequently Asked Questions
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <h1>Source code for deepcave.runs</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2021-2024 The DeepCAVE Authors</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#   http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>

<span class="c1">#  noqa: D400</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd"># AbstractRun</span>

<span class="sd">This module provides utilities to create and handle an abstract run.</span>

<span class="sd">It provides functions to get information of the run, as well as the used objectives.</span>

<span class="sd">## Classes</span>
<span class="sd">    - AbstractRun: Create a new run.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">abc</span><span class="w"> </span><span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Iterator</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">ConfigSpace</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ConfigSpace</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">CategoricalHyperparameter</span><span class="p">,</span>
    <span class="n">Configuration</span><span class="p">,</span>
    <span class="n">Constant</span><span class="p">,</span>
    <span class="n">UniformFloatHyperparameter</span><span class="p">,</span>
    <span class="n">UniformIntegerHyperparameter</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ConfigSpace.hyperparameters.hp_components</span><span class="w"> </span><span class="kn">import</span> <span class="n">ROUND_PLACES</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.constants</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">COMBINED_BUDGET</span><span class="p">,</span>
    <span class="n">COMBINED_COST_NAME</span><span class="p">,</span>
    <span class="n">COMBINED_SEED</span><span class="p">,</span>
    <span class="n">CONSTANT_VALUE</span><span class="p">,</span>
    <span class="n">NAN_VALUE</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.runs.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">NotMergeableError</span><span class="p">,</span> <span class="n">RunInequality</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.runs.objective</span><span class="w"> </span><span class="kn">import</span> <span class="n">Objective</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.runs.status</span><span class="w"> </span><span class="kn">import</span> <span class="n">Status</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.runs.trial</span><span class="w"> </span><span class="kn">import</span> <span class="n">Trial</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.utils.logs</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_logger</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">deepcave.utils.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">config_to_tuple</span>


<div class="viewcode-block" id="AbstractRun">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AbstractRun</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a new run.</span>

<span class="sd">    Provide functions to get information of the run, as well as the used objectives.</span>

<span class="sd">    Properties</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the run.</span>
<span class="sd">    path : Optional[Path]</span>
<span class="sd">        The path to the run.</span>
<span class="sd">    logger : Logger</span>
<span class="sd">        The logger for the run.</span>
<span class="sd">    meta: Dict[str, Any]</span>
<span class="sd">        Contains the run&#39;s meta information.</span>
<span class="sd">    configspace: ConfigSpace.ConfigurationSpace</span>
<span class="sd">        The configuration space of the run.</span>
<span class="sd">    configs: Dict[int, Configuration]</span>
<span class="sd">        Contains the configurations.</span>
<span class="sd">    config_id_mapping: Dict[Tuple, int]</span>
<span class="sd">        Maps configuration tuples to configuration ids.</span>
<span class="sd">    origins: Dict[int, str]</span>
<span class="sd">        The origin of the configuration.</span>
<span class="sd">    models: Dict[int, Optional[Union[str, &quot;torch.nn.Module&quot;]]]</span>
<span class="sd">        Contains the modules.</span>
<span class="sd">    history: List[Trial]</span>
<span class="sd">        The history of Trials.</span>
<span class="sd">    trial_keys: Dict[Tuple[str, int], int]</span>
<span class="sd">        Contains config_id, budget and the corresponding trial_id.</span>
<span class="sd">    models_dir : Path</span>
<span class="sd">        The directory of the model.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>

        <span class="c1"># objects created by reset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

<div class="viewcode-block" id="AbstractRun.reset">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.reset">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the run to default values / empties.</span>

<span class="sd">        Clear the initial data and configurations of the object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configspace</span><span class="p">:</span> <span class="n">ConfigSpace</span><span class="o">.</span><span class="n">ConfigurationSpace</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="n">Configuration</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_id_mapping</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Tuple</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">models</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>  <span class="c1"># type: ignore</span>
            <span class="nb">int</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;torch.nn.Module&quot;</span><span class="p">]]</span>  <span class="c1"># noqa: F821</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Trial</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trial_keys</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span>
            <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span> <span class="nb">int</span>
        <span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># (config_id, budget, seed) -&gt; trial_id</span>

        <span class="c1"># Cached data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_highest_budget</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># config_id -&gt; budget</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_update_highest_budget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">config_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">budget</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">status</span><span class="p">:</span> <span class="n">Status</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the highest budget.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config_id : int</span>
<span class="sd">            The identificator of the configuration.</span>
<span class="sd">        budget : Union[int, float]</span>
<span class="sd">            The new highest budget.</span>
<span class="sd">        status : Status</span>
<span class="sd">            The status of the run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="n">Status</span><span class="o">.</span><span class="n">SUCCESS</span><span class="p">:</span>
            <span class="c1"># Update highest budget</span>
            <span class="k">if</span> <span class="n">config_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_highest_budget</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_highest_budget</span><span class="p">[</span><span class="n">config_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">budget</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">budget</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_highest_budget</span><span class="p">[</span><span class="n">config_id</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_highest_budget</span><span class="p">[</span><span class="n">config_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">budget</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hash of the current run.</span>

<span class="sd">        If hash changes, cache has to be cleared. This ensures that</span>
<span class="sd">        the cache always holds the latest results of the run.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        hash : str</span>
<span class="sd">            Hash of the run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hash of the file.</span>

<span class="sd">        This is used to identify the file.</span>
<span class="sd">        In contrast to `hash`, this hash should not be changed throughout the run.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            Hash of the run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">latest_change</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the latest change.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            The latest change.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">0</span>

<div class="viewcode-block" id="AbstractRun.get_trial_key">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_trial_key">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_trial_key</span><span class="p">(</span>
        <span class="n">config_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span> <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the trial key.</span>

<span class="sd">        It is obtained through the assembly of configuration and budget.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config_id : int</span>
<span class="sd">            The identificator of the configuration.</span>
<span class="sd">        budget : Optional[Union[int, float]]</span>
<span class="sd">            The budget of the Trial.</span>
<span class="sd">        seed: Optional[int]</span>
<span class="sd">            The seed used for the Trial.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[int, Optional[Union[int, float]], Optional[int]]</span>
<span class="sd">            Tuple representing the trial key, consisting of configuration id, budget, and seed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">config_id</span><span class="p">,</span> <span class="n">budget</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span></div>


<div class="viewcode-block" id="AbstractRun.get_trial">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_trial">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_trial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trial_key</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Trial</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the trial with the responding key if existing.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        trial_key : Tuple[int, Union[int, float], int]</span>
<span class="sd">            The key for the desired trial.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Optional[Trial]</span>
<span class="sd">            The trial object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">trial_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">trial_keys</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">trial_keys</span><span class="p">[</span><span class="n">trial_key</span><span class="p">]]</span></div>


<div class="viewcode-block" id="AbstractRun.get_trials">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_trials">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_trials</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Trial</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get an iterator of all stored trials.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Iterator[Trial]</span>
<span class="sd">            An iterator over all stored trials.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">yield from</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span></div>


<div class="viewcode-block" id="AbstractRun.get_meta">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_meta">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a shallow copy of the meta information.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[str, Any]</span>
<span class="sd">            A shallow copy of the meta information dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span></div>


<div class="viewcode-block" id="AbstractRun.empty">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.empty">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">empty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the run&#39;s history is empty.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            True if run history is empty, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span></div>


<div class="viewcode-block" id="AbstractRun.get_origin">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_origin">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the origin, given a config id.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config_id : int</span>
<span class="sd">            The identificator of the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Optional[str]</span>
<span class="sd">            An origin string corresponding to the given configuration id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="n">config_id</span><span class="p">]</span></div>


<div class="viewcode-block" id="AbstractRun.get_objectives">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_objectives">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_objectives</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Objective</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a list of all objectives corresponding to the run.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Objective]</span>
<span class="sd">            A list containing all objectives associated with the run.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">objectives</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s2">&quot;objectives&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">():</span>
            <span class="n">objective</span> <span class="o">=</span> <span class="n">Objective</span><span class="o">.</span><span class="n">from_json</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
            <span class="n">objectives</span> <span class="o">+=</span> <span class="p">[</span><span class="n">objective</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">objectives</span></div>


<div class="viewcode-block" id="AbstractRun.get_objective">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_objective">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_objective</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Objective</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the objective based on the id or the name.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id : Union[str, int]</span>
<span class="sd">            The id or name of the objective.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Optional[Objective]</span>
<span class="sd">            The objective.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">objectives</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>

        <span class="c1"># Otherwise, iterate till the name is found</span>
        <span class="k">for</span> <span class="n">objective</span> <span class="ow">in</span> <span class="n">objectives</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">objective</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="nb">id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">objective</span>

        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="AbstractRun.get_objective_id">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_objective_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_objective_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objective</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Objective</span><span class="p">,</span> <span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the id of the objective if it is found.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        objective : Union[Objective, str]</span>
<span class="sd">            The objective or objective name for which the id is returned.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        objective_id : int</span>
<span class="sd">            Objective id from the passed objective.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        RuntimeError</span>
<span class="sd">            If objective was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">()</span>
        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">objective2</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">objectives</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">Objective</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">objective</span> <span class="o">==</span> <span class="n">objective2</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">id</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">objective</span> <span class="o">==</span> <span class="n">objective2</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">id</span>

        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Objective was not found.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="AbstractRun.get_objective_ids">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_objective_ids">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_objective_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the ids of the objectives.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[int]</span>
<span class="sd">            A list of the ids of the objectives.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">())))</span></div>


<div class="viewcode-block" id="AbstractRun.get_objective_name">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_objective_name">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_objective_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objectives</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Objective</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the cost name of given objective names.</span>

<span class="sd">        Returns &quot;Combined Cost&quot; if multiple objective names were involved.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        objectives : Optional[List[Objective]]</span>
<span class="sd">            A list of the objectives.</span>
<span class="sd">            By default None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The name of the objective.</span>
<span class="sd">            Returns &quot;Combined Cost&quot; if multiple objective names were involved.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">available_objective_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objective_names</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">objectives</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">available_objective_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">available_objective_names</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">objectives</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>

        <span class="k">return</span> <span class="n">COMBINED_COST_NAME</span></div>


<div class="viewcode-block" id="AbstractRun.get_objective_names">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_objective_names">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_objective_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the names of the objectives.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[str]</span>
<span class="sd">            A list containing the names of the objectives.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">()]</span></div>


<div class="viewcode-block" id="AbstractRun.get_configs">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_configs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_configs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">statuses</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Status</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Status</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get configurations of the run.</span>

<span class="sd">        Optionally, only configurations which were evaluated on the passed budget, seed,</span>
<span class="sd">        and stati are considered.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        budget : Optional[Union[int, float]]</span>
<span class="sd">            Budget to select the configs. If no budget is given, all seeds are considered.</span>
<span class="sd">            By default None.</span>
<span class="sd">        seed: Optional[int]</span>
<span class="sd">            Seed to select the configs. If no seed is given, all seeds are considered.</span>
<span class="sd">            By default None.</span>
<span class="sd">        statuses : Optional[Union[Status, List[Status]]]</span>
<span class="sd">            Only selected stati are considered. If no status is given, all stati are considered.</span>
<span class="sd">            By default None.</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[int, Configuration]</span>
<span class="sd">            Configuration id and the configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Include all configs if budget is a combined budget</span>
        <span class="k">if</span> <span class="n">budget</span> <span class="o">==</span> <span class="n">COMBINED_BUDGET</span><span class="p">:</span>
            <span class="n">budget</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Include all configs if we have combined seed</span>
        <span class="k">if</span> <span class="n">seed</span> <span class="o">==</span> <span class="n">COMBINED_SEED</span><span class="p">:</span>
            <span class="n">seed</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">configs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">trial</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">budget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">budget</span> <span class="o">!=</span> <span class="n">trial</span><span class="o">.</span><span class="n">budget</span><span class="p">:</span>
                    <span class="k">continue</span>

            <span class="k">if</span> <span class="n">seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">seed</span> <span class="o">!=</span> <span class="n">trial</span><span class="o">.</span><span class="n">seed</span><span class="p">:</span>
                    <span class="k">continue</span>

            <span class="k">if</span> <span class="n">statuses</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">statuses</span><span class="p">,</span> <span class="n">Status</span><span class="p">):</span>
                    <span class="n">statuses</span> <span class="o">=</span> <span class="p">[</span><span class="n">statuses</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">statuses</span><span class="p">:</span>
                    <span class="k">continue</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">config_id</span> <span class="o">:=</span> <span class="n">trial</span><span class="o">.</span><span class="n">config_id</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">configs</span><span class="p">:</span>
                <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="n">config_id</span><span class="p">)</span>
                <span class="n">configs</span><span class="p">[</span><span class="n">config_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">config</span>

        <span class="c1"># Sort dictionary</span>
        <span class="n">configs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">configs</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

        <span class="k">return</span> <span class="n">configs</span></div>


<div class="viewcode-block" id="AbstractRun.get_config">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_config">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Configuration</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve the configuration with the corresponding id.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id : int</span>
<span class="sd">            The id of the configuration.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Configuration</span>
<span class="sd">            The corresponding Configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configspace</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">configs</span><span class="p">[</span><span class="nb">id</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">config</span></div>


<div class="viewcode-block" id="AbstractRun.get_config_id">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_config_id">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_config_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Configuration</span><span class="p">,</span> <span class="n">Dict</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the id of the configuration.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config : Union[Configuration, Dict]</span>
<span class="sd">            The configuration for which to find the id.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Optional[int]</span>
<span class="sd">            The configuration id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Convert the input configuration to a tuple</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">):</span>
            <span class="n">config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
        <span class="c1"># Use same rounding as ConfigSpace does</span>
        <span class="n">input_config_tuple</span> <span class="o">=</span> <span class="n">config_to_tuple</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">ROUND_PLACES</span><span class="p">)</span>

        <span class="c1"># Check if the input configuration tuple exists in the config id mapping</span>
        <span class="k">if</span> <span class="n">input_config_tuple</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_id_mapping</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_id_mapping</span><span class="p">[</span><span class="n">input_config_tuple</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="AbstractRun.get_num_configs">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_num_configs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_num_configs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Count the number of configurations stored in this run with a specific budget.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        budget : Optional[Union[int, float]]</span>
<span class="sd">            The budget for which to count the configurations.</span>
<span class="sd">            If not provided, counts all configurations.</span>
<span class="sd">            Default is None.</span>
<span class="sd">        seed : Optional[int]</span>
<span class="sd">            The seed for which to count the configurations.</span>
<span class="sd">            If not provided, counts all configurations.</span>
<span class="sd">            Default is None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The number of all configurations with a given budget.</span>
<span class="sd">            If budget is None, counts all configurations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_configs</span><span class="p">(</span><span class="n">budget</span><span class="o">=</span><span class="n">budget</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">))</span></div>


<div class="viewcode-block" id="AbstractRun.get_budget">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_budget">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_budget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="n">human</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the budget given an id.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        id : Union[int, str]</span>
<span class="sd">            The id of the wanted budget.</span>
<span class="sd">            If id is a string, it is converted to an integer.</span>
<span class="sd">        human : bool, optional</span>
<span class="sd">            Make the output more readable.</span>
<span class="sd">            By default False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float, int</span>
<span class="sd">            The budget.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        TypeError</span>
<span class="sd">            If the budget with this id is invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">budgets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_budgets</span><span class="p">(</span><span class="n">human</span><span class="o">=</span><span class="n">human</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">budgets</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">)]</span>  <span class="c1"># type: ignore</span></div>


<div class="viewcode-block" id="AbstractRun.get_budget_ids">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_budget_ids">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_budget_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include_combined</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the corresponding ids for the budgets.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        include_combined : bool, optional</span>
<span class="sd">            If False, cut last id of budget ids.</span>
<span class="sd">            By default True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[int]</span>
<span class="sd">            A list of the budget ids.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">budget_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_budgets</span><span class="p">())))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">include_combined</span><span class="p">:</span>
            <span class="n">budget_ids</span> <span class="o">=</span> <span class="n">budget_ids</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">budget_ids</span></div>


<div class="viewcode-block" id="AbstractRun.get_budgets">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_budgets">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_budgets</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">human</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_combined</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the budgets from the meta data.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        human : bool, optional</span>
<span class="sd">            Make the output more readable.</span>
<span class="sd">            By default False.</span>
<span class="sd">        include_combined : bool, optional</span>
<span class="sd">            If True, include the combined budget.</span>
<span class="sd">            By default True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Union[int, float, str]]</span>
<span class="sd">            List of budgets. In a readable form, if human is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">budgets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s2">&quot;budgets&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">include_combined</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">budgets</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">COMBINED_BUDGET</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">budgets</span><span class="p">:</span>
            <span class="n">budgets</span> <span class="o">+=</span> <span class="p">[</span><span class="n">COMBINED_BUDGET</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">human</span><span class="p">:</span>
            <span class="n">readable_budgets</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">budgets</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="n">COMBINED_BUDGET</span><span class="p">:</span>
                    <span class="n">readable_budgets</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;Combined&quot;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">b</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">readable_budgets</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">b</span><span class="p">),</span> <span class="mi">2</span><span class="p">))]</span>

            <span class="k">return</span> <span class="n">readable_budgets</span>

        <span class="k">return</span> <span class="n">budgets</span></div>


<div class="viewcode-block" id="AbstractRun.get_highest_budget">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_highest_budget">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_highest_budget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the highest found budget for a config id.</span>

<span class="sd">        If no config id is specified then</span>
<span class="sd">        the highest available budget is returned.</span>
<span class="sd">        Moreover, if no budget is available None is returned.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config_id : Optional[int]</span>
<span class="sd">            The config id for which the highest budget is returned.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Optional[Union[int, float]]</span>
<span class="sd">            The highest budget or None if no budget was specified.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">config_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">budgets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s2">&quot;budgets&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">budgets</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>

            <span class="k">return</span> <span class="n">budgets</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_highest_budget</span><span class="p">[</span><span class="n">config_id</span><span class="p">]</span></div>


<div class="viewcode-block" id="AbstractRun.get_seeds">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_seeds">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_seeds</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">human</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">include_combined</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the seeds from the meta data.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        human : bool, optional</span>
<span class="sd">            Make the output better readable. By default False.</span>
<span class="sd">        include_combined : bool, optional</span>
<span class="sd">            If true, return combined seed as well. By default True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Union[int, str]]</span>
<span class="sd">            List of seeds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">seeds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="s2">&quot;seeds&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">include_combined</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">seeds</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">COMBINED_SEED</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">seeds</span><span class="p">:</span>
            <span class="n">seeds</span> <span class="o">+=</span> <span class="p">[</span><span class="n">COMBINED_SEED</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">human</span><span class="p">:</span>
            <span class="n">readable_seeds</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">seeds</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">s</span> <span class="o">==</span> <span class="n">COMBINED_SEED</span><span class="p">:</span>
                    <span class="n">readable_seeds</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;Combined&quot;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">s</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">readable_seeds</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">s</span><span class="p">)]</span>

            <span class="k">return</span> <span class="n">readable_seeds</span>

        <span class="k">return</span> <span class="n">seeds</span></div>


    <span class="k">def</span><span class="w"> </span><span class="nf">_process_costs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">costs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process the costs to get rid of NaNs.</span>

<span class="sd">        NaNs are replaced by the worst value of the</span>
<span class="sd">        objective.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        costs : List[float]</span>
<span class="sd">            Costs, which should be processed.</span>
<span class="sd">            Must be the same length as the number of objectives.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[float]</span>
<span class="sd">            Processed costs without NaN values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_costs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">cost</span><span class="p">,</span> <span class="n">objective</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">costs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">()):</span>
            <span class="c1"># Replace with the worst cost</span>
            <span class="k">if</span> <span class="n">cost</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">cost</span> <span class="o">=</span> <span class="n">objective</span><span class="o">.</span><span class="n">get_worst_value</span><span class="p">()</span>
            <span class="n">new_costs</span> <span class="o">+=</span> <span class="p">[</span><span class="n">cost</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">new_costs</span>

<div class="viewcode-block" id="AbstractRun.get_avg_costs">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_avg_costs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_avg_costs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">statuses</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Status</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Status</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get average costs over all seeds for a config.</span>

<span class="sd">        Optionally, only configurations which were evaluated on the passed budget and stati</span>
<span class="sd">        are considered.</span>

<span class="sd">        In case of multi-objective, multiple costs are returned in the form of a list.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config_id : int</span>
<span class="sd">            Configuration id to get the costs for.</span>
<span class="sd">        budget : Optional[Union[int, float]]</span>
<span class="sd">            Budget to get the costs from the configuration id for. If budget is</span>
<span class="sd">            None, the highest budget is chosen. By default None.</span>
<span class="sd">        statuses : Optional[Union[Status, List[Status]]]</span>
<span class="sd">            Only selected stati are considered. If no status is given, all stati are considered.</span>
<span class="sd">            By default None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[float]</span>
<span class="sd">            List of average cost values for the given config_id and budget.</span>
<span class="sd">        List[float]</span>
<span class="sd">            List of std cost values for the given config_id and budget.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">()</span>

        <span class="c1"># Budget might not be evaluated</span>
        <span class="n">all_costs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_costs</span><span class="p">(</span><span class="n">budget</span><span class="o">=</span><span class="n">budget</span><span class="p">,</span> <span class="n">statuses</span><span class="o">=</span><span class="n">statuses</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">config_id</span> <span class="ow">in</span> <span class="n">all_costs</span><span class="p">:</span>
            <span class="n">config_costs</span> <span class="o">=</span> <span class="n">all_costs</span><span class="p">[</span><span class="n">config_id</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No costs available for config_id </span><span class="si">{</span><span class="n">config_id</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

        <span class="n">avg_costs</span><span class="p">,</span> <span class="n">std_costs</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">objectives</span><span class="p">)):</span>
            <span class="n">costs</span> <span class="o">=</span> <span class="p">[</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="k">for</span> <span class="n">values</span> <span class="ow">in</span> <span class="n">config_costs</span><span class="o">.</span><span class="n">values</span><span class="p">()</span> <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
            <span class="n">avg_costs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">costs</span><span class="p">)))</span>
            <span class="n">std_costs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">costs</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">avg_costs</span><span class="p">,</span> <span class="n">std_costs</span></div>


<div class="viewcode-block" id="AbstractRun.get_all_costs">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_all_costs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_all_costs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">statuses</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Status</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Status</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">selected_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all costs in the history with their config ids and seeds.</span>

<span class="sd">        Optionally, only configurations which were evaluated on the passed budget, seed, and stati</span>
<span class="sd">        are considered.</span>

<span class="sd">        In case of multi-objective, multiple costs are returned in the form of a list.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        budget : Optional[Union[int, float]]</span>
<span class="sd">            Budget to select the costs. If no budget is given, the highest budget is chosen.</span>
<span class="sd">            By default, None.</span>
<span class="sd">        statuses : Optional[Union[Status, List[Status]]]</span>
<span class="sd">            Only selected stati are considered. If no status is given, all stati are considered.</span>
<span class="sd">            By default, None.</span>
<span class="sd">        seed : Optional[int], optional</span>
<span class="sd">            Seed to select the costs. If no seed is given, all seeds are considered.</span>
<span class="sd">            By default, None.</span>
<span class="sd">        selected_ids: Optional[List[int]], optional</span>
<span class="sd">            If set, only history ids in the list will be considered. By default, None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Dict[int, Dict[int, List[float]]]</span>
<span class="sd">            Config ids and seeds with their corresponding list of costs.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">budget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">budget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_highest_budget</span><span class="p">()</span>

        <span class="c1"># In case of COMBINED_BUDGET, only the costs of the highest found budget are kept</span>
        <span class="n">highest_evaluated_budget</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">results</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">selected_ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">history</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selected_ids</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">history</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span>
        <span class="k">for</span> <span class="n">trial</span> <span class="ow">in</span> <span class="n">history</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">statuses</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">statuses</span><span class="p">,</span> <span class="n">Status</span><span class="p">):</span>
                    <span class="n">statuses</span> <span class="o">=</span> <span class="p">[</span><span class="n">statuses</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">status</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">statuses</span><span class="p">:</span>
                    <span class="k">continue</span>

            <span class="k">if</span> <span class="n">seed</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">seed</span> <span class="o">!=</span> <span class="n">seed</span><span class="p">:</span>
                    <span class="k">continue</span>

            <span class="k">if</span> <span class="n">budget</span> <span class="o">==</span> <span class="n">COMBINED_BUDGET</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">config_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">highest_evaluated_budget</span><span class="p">:</span>
                    <span class="n">highest_evaluated_budget</span><span class="p">[</span><span class="n">trial</span><span class="o">.</span><span class="n">config_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">trial</span><span class="o">.</span><span class="n">budget</span>

                <span class="n">latest_budget</span> <span class="o">=</span> <span class="n">highest_evaluated_budget</span><span class="p">[</span><span class="n">trial</span><span class="o">.</span><span class="n">config_id</span><span class="p">]</span>
                <span class="c1"># Only the highest budget is kept</span>
                <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">budget</span> <span class="o">&gt;=</span> <span class="n">latest_budget</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">config_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
                        <span class="n">results</span><span class="p">[</span><span class="n">trial</span><span class="o">.</span><span class="n">config_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">results</span><span class="p">[</span><span class="n">trial</span><span class="o">.</span><span class="n">config_id</span><span class="p">][</span><span class="n">trial</span><span class="o">.</span><span class="n">seed</span><span class="p">]</span> <span class="o">=</span> <span class="n">trial</span><span class="o">.</span><span class="n">costs</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">budget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">budget</span> <span class="o">!=</span> <span class="n">budget</span><span class="p">:</span>
                        <span class="k">continue</span>
                <span class="k">if</span> <span class="n">trial</span><span class="o">.</span><span class="n">config_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
                    <span class="n">results</span><span class="p">[</span><span class="n">trial</span><span class="o">.</span><span class="n">config_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="n">results</span><span class="p">[</span><span class="n">trial</span><span class="o">.</span><span class="n">config_id</span><span class="p">][</span><span class="n">trial</span><span class="o">.</span><span class="n">seed</span><span class="p">]</span> <span class="o">=</span> <span class="n">trial</span><span class="o">.</span><span class="n">costs</span>
        <span class="k">return</span> <span class="n">results</span></div>


<div class="viewcode-block" id="AbstractRun.get_status">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_status">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_status</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">config_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Status</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the status of a trial (i.e. configuration, budget and seed).</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config_id : int</span>
<span class="sd">            Configuration id to get the status for.</span>
<span class="sd">        seed : Optional[int]</span>
<span class="sd">            Seed to get the status from the configuration id for.</span>
<span class="sd">        budget : Optional[Union[int, float]]</span>
<span class="sd">            Budget to get the status from the configuration id for. If budget is</span>
<span class="sd">            None, the highest budget is chosen. By default None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Status</span>
<span class="sd">            Status of the configuration.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the configuration id is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">budget</span> <span class="o">==</span> <span class="n">COMBINED_BUDGET</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Status</span><span class="o">.</span><span class="n">NOT_EVALUATED</span>

        <span class="k">if</span> <span class="n">budget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">budget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_highest_budget</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">config_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Configuration id was not found.&quot;</span><span class="p">)</span>

        <span class="n">trial_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_trial_key</span><span class="p">(</span><span class="n">config_id</span><span class="p">,</span> <span class="n">budget</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>

        <span class="c1"># Unfortunately, it is necessary to iterate through the history to find the status</span>
        <span class="c1"># TODO: Cache the stati</span>
        <span class="k">for</span> <span class="n">trial</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">trial_key</span> <span class="o">==</span> <span class="n">trial</span><span class="o">.</span><span class="n">get_key</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">trial</span><span class="o">.</span><span class="n">status</span>

        <span class="k">return</span> <span class="n">Status</span><span class="o">.</span><span class="n">NOT_EVALUATED</span></div>


<div class="viewcode-block" id="AbstractRun.get_incumbent">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_incumbent">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_incumbent</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">objectives</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Objective</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Objective</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">statuses</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Status</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Status</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">selected_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Configuration</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the incumbent with its objective value (merged obj value for multiple objectives).</span>

<span class="sd">        The incumbent is the configuration with the</span>
<span class="sd">            lowest objective value in case of objective.optimize == &quot;lower&quot; (or merged objectives)</span>
<span class="sd">            and</span>
<span class="sd">            highest objective value in case of objective.optimize == &quot;upper&quot;.</span>

<span class="sd">        Optionally, only configurations which were evaluated on the passed budget, seed,</span>
<span class="sd">        and stati are considered.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        objectives : Optional[Union[Objective, List[Objective]]], optional</span>
<span class="sd">            Considered objectives. If None, all objectives are considered. By default None.</span>
<span class="sd">        budget : Optional[Union[int, float]], optional</span>
<span class="sd">            Considered budget. If None, the highest budget is chosen. By default None.</span>
<span class="sd">        seed : Optional[int], optional</span>
<span class="sd">            Considered seed. If no seed is given, all seeds are considered. By default None.</span>
<span class="sd">        statuses : Optional[Union[Status, List[Status]]], optional</span>
<span class="sd">            Considered stati. If None, all stati are considered. By default None.</span>
<span class="sd">        selected_ids: Optional[List[int]], optional</span>
<span class="sd">            If set, only ids in selected_ids will be considered. This can for example be</span>
<span class="sd">            useful if only ids up to a certain end-time shall be considered. By default None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[Configuration, float]</span>
<span class="sd">            Incumbent with its cost.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        RuntimeError</span>
<span class="sd">            If no incumbent was found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objectives</span><span class="p">,</span> <span class="n">Objective</span><span class="p">):</span>
            <span class="n">single_objective</span> <span class="o">=</span> <span class="n">objectives</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objectives</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">objectives</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">single_objective</span> <span class="o">=</span> <span class="n">objectives</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">single_objective</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">single_objective</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">single_objective</span><span class="o">.</span><span class="n">optimize</span> <span class="o">==</span> <span class="s2">&quot;upper&quot;</span><span class="p">:</span>
            <span class="n">best_cost</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">best_cost</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="n">best_config_id</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_costs</span><span class="p">(</span>
            <span class="n">budget</span><span class="o">=</span><span class="n">budget</span><span class="p">,</span> <span class="n">statuses</span><span class="o">=</span><span class="n">statuses</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span> <span class="n">selected_ids</span><span class="o">=</span><span class="n">selected_ids</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No data available, thus no incumbent found.&quot;</span><span class="p">)</span>

        <span class="n">seed_count</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">config_id</span><span class="p">,</span> <span class="n">seed_costs_dict</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">seed_count</span><span class="p">[</span><span class="n">config_id</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">seed_costs_dict</span><span class="p">)</span>
        <span class="n">max_seed_count</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">seed_count</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">config_id</span><span class="p">,</span> <span class="n">seed_costs_dict</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># If there are multiple seeds, only configurations evaluated on all seeds are</span>
            <span class="c1"># considered. From these configurations, the one with the highest average objective</span>
            <span class="c1"># value over the seeds is considered as the incumbent.</span>
            <span class="k">if</span> <span class="n">max_seed_count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">seed_costs_dict</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">max_seed_count</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="c1"># Get average over all seeds</span>
                <span class="n">config_costs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">max_seed_count</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">())])</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">seed_costs</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">seed_costs_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
                    <span class="n">config_costs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">seed_costs</span>
                <span class="n">avg_cost</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">config_costs</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

            <span class="c1"># If there is only one seed, the costs can be used directly</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">avg_cost</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">seed_costs_dict</span><span class="o">.</span><span class="n">values</span><span class="p">()][</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># If there are multiple objectives, the costs are merged to one cost value</span>
            <span class="k">if</span> <span class="n">single_objective</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">cost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">merge_costs</span><span class="p">(</span><span class="n">avg_cost</span><span class="p">,</span> <span class="n">objectives</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">cost</span> <span class="o">=</span> <span class="n">avg_cost</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_objective_id</span><span class="p">(</span><span class="n">single_objective</span><span class="p">)]</span>

            <span class="k">if</span> <span class="n">cost</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">single_objective</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">single_objective</span><span class="o">.</span><span class="n">optimize</span> <span class="o">==</span> <span class="s2">&quot;upper&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cost</span> <span class="o">&gt;</span> <span class="n">best_cost</span><span class="p">:</span>
                    <span class="n">best_cost</span> <span class="o">=</span> <span class="n">cost</span>
                    <span class="n">best_config_id</span> <span class="o">=</span> <span class="n">config_id</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">cost</span> <span class="o">&lt;</span> <span class="n">best_cost</span><span class="p">:</span>
                    <span class="n">best_cost</span> <span class="o">=</span> <span class="n">cost</span>
                    <span class="n">best_config_id</span> <span class="o">=</span> <span class="n">config_id</span>

        <span class="k">if</span> <span class="n">best_config_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;No incumbent found.&quot;</span><span class="p">)</span>

        <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="n">best_config_id</span><span class="p">)</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configspace</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
        <span class="n">normalized_cost</span> <span class="o">=</span> <span class="n">best_cost</span>

        <span class="k">return</span> <span class="n">config</span><span class="p">,</span> <span class="n">normalized_cost</span></div>


<div class="viewcode-block" id="AbstractRun.merge_costs">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.merge_costs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">merge_costs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">costs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">objectives</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Objective</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Objective</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate one cost value from multiple costs.</span>

<span class="sd">        Normalizes the costs first and weigh every cost the same.</span>
<span class="sd">        The lower the normalized cost, the better.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        costs : List[float]</span>
<span class="sd">            The costs, which should be merged. Must be the same length as the original number of</span>
<span class="sd">            objectives.</span>
<span class="sd">        objectives : Optional[List[Objective]]</span>
<span class="sd">            The considered objectives to the costs. By default None.</span>
<span class="sd">            If None, all objectives are considered. The passed objectives can differ from the</span>
<span class="sd">            original number objectives.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            Merged costs.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        RuntimeError</span>
<span class="sd">            If the number of costs is different from the original number of objectives.</span>
<span class="sd">            If the objective was not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get rid of NaN values</span>
        <span class="n">costs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_process_costs</span><span class="p">(</span><span class="n">costs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">objectives</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objectives</span><span class="p">,</span> <span class="n">Objective</span><span class="p">):</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="p">[</span><span class="n">objectives</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">costs</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">()):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;The number of costs must be the same as the original number of objectives.&quot;</span>
            <span class="p">)</span>

        <span class="c1"># First normalize</span>
        <span class="n">filtered_objectives</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">normalized_costs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">objective</span> <span class="ow">in</span> <span class="n">objectives</span><span class="p">:</span>
            <span class="n">objective_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objective_id</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">objective_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;The objective was not found.&quot;</span><span class="p">)</span>

            <span class="n">cost</span> <span class="o">=</span> <span class="n">costs</span><span class="p">[</span><span class="n">objective_id</span><span class="p">]</span>

            <span class="k">assert</span> <span class="n">objective</span><span class="o">.</span><span class="n">lower</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">assert</span> <span class="n">objective</span><span class="o">.</span><span class="n">upper</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

            <span class="c1"># TODO: What to do if we deal with infinity here?</span>
            <span class="k">assert</span> <span class="n">objective</span><span class="o">.</span><span class="n">lower</span> <span class="o">!=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
            <span class="k">assert</span> <span class="n">objective</span><span class="o">.</span><span class="n">upper</span> <span class="o">!=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span>

            <span class="n">a</span> <span class="o">=</span> <span class="n">cost</span> <span class="o">-</span> <span class="n">objective</span><span class="o">.</span><span class="n">lower</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">objective</span><span class="o">.</span><span class="n">upper</span> <span class="o">-</span> <span class="n">objective</span><span class="o">.</span><span class="n">lower</span>
            <span class="n">normalized_cost</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>

            <span class="c1"># The lower is optimized</span>
            <span class="c1"># So the normalized cost needs to be flipped</span>
            <span class="k">if</span> <span class="n">objective</span><span class="o">.</span><span class="n">optimize</span> <span class="o">==</span> <span class="s2">&quot;upper&quot;</span><span class="p">:</span>
                <span class="n">normalized_cost</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">normalized_cost</span>

            <span class="n">normalized_costs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">normalized_cost</span><span class="p">)</span>
            <span class="n">filtered_objectives</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>

        <span class="c1"># Give the same weight to all objectives (for now)</span>
        <span class="n">objective_weights</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">objectives</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">objectives</span><span class="p">))]</span>

        <span class="n">costs</span> <span class="o">=</span> <span class="p">[</span><span class="n">u</span> <span class="o">*</span> <span class="n">v</span> <span class="k">for</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">normalized_costs</span><span class="p">,</span> <span class="n">objective_weights</span><span class="p">)]</span>
        <span class="n">cost</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">costs</span><span class="p">)</span><span class="o">.</span><span class="n">item</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">cost</span></div>


<div class="viewcode-block" id="AbstractRun.get_model">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_model">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;torch.nn.Module&quot;</span><span class="p">]:</span>  <span class="c1"># type: ignore # noqa: F821</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a model associated with the configuration id.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config_id : int</span>
<span class="sd">            The configuration id.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Optional[&quot;torch.nn.Module]</span>
<span class="sd">            A model for the provided configuration id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">models_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">config_id</span><span class="p">)</span><span class="si">}</span><span class="s2">.pth&quot;</span>  <span class="c1"># type: ignore</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></div>


<div class="viewcode-block" id="AbstractRun.get_trajectory">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_trajectory">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_trajectory</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">objective</span><span class="p">:</span> <span class="n">Objective</span><span class="p">,</span>
        <span class="n">budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the trajectory of the given objective, budget, and seed.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        objective : Objective</span>
<span class="sd">            Objective to calculate the trajectory for.</span>
<span class="sd">        budget : Optional[Union[int, float]]</span>
<span class="sd">            Budget to calculate the trajectory for. If no budget is given, then the highest budget</span>
<span class="sd">            is chosen. By default None.</span>
<span class="sd">        seed : Optional[int], optional</span>
<span class="sd">            Seed to calculate the trajectory for. If no seed is given, then all seeds are</span>
<span class="sd">            considered. By default None.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[List[float], List[float], List[float], List[int], List[int]]</span>
<span class="sd">            times : List[float]</span>
<span class="sd">                Times of the trajectory.</span>
<span class="sd">            costs_mean : List[float]</span>
<span class="sd">                Costs of the trajectory.</span>
<span class="sd">            costs_std : List[float]</span>
<span class="sd">                Standard deviation of the costs of the trajectory. This is particularly useful for</span>
<span class="sd">                grouped runs.</span>
<span class="sd">            ids : List[int]</span>
<span class="sd">                The &quot;global&quot; ids of the selected trials.</span>
<span class="sd">            config_ids : List[int]</span>
<span class="sd">                Config ids of the selected trials.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">budget</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">budget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_highest_budget</span><span class="p">()</span>

        <span class="n">costs_mean</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">costs_std</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">config_ids</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">times</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">order</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Sort self.history by end-time</span>
        <span class="k">for</span> <span class="nb">id</span><span class="p">,</span> <span class="n">trial</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">):</span>
            <span class="n">order</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">id</span><span class="p">,</span> <span class="n">trial</span><span class="o">.</span><span class="n">end_time</span><span class="p">))</span>
        <span class="n">order</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">tup</span><span class="p">:</span> <span class="n">tup</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

        <span class="c1"># Important: Objective can be minimized or maximized</span>
        <span class="k">if</span> <span class="n">objective</span><span class="o">.</span><span class="n">optimize</span> <span class="o">==</span> <span class="s2">&quot;lower&quot;</span><span class="p">:</span>
            <span class="n">current_cost</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">inf</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">current_cost</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span>

        <span class="c1"># Iterate over the history ordered by end-time and calculate the current incumbent</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">order</span><span class="p">):</span>
            <span class="n">trial</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">history</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span>

            <span class="c1"># Get the incumbent over all trials up to this point</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">_</span><span class="p">,</span> <span class="n">cost</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_incumbent</span><span class="p">(</span>
                    <span class="n">objectives</span><span class="o">=</span><span class="n">objective</span><span class="p">,</span>
                    <span class="n">budget</span><span class="o">=</span><span class="n">budget</span><span class="p">,</span>
                    <span class="n">seed</span><span class="o">=</span><span class="n">seed</span><span class="p">,</span>
                    <span class="n">selected_ids</span><span class="o">=</span><span class="p">[</span><span class="n">selected_id</span> <span class="k">for</span> <span class="n">selected_id</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">order</span><span class="p">[:</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]],</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Now it&#39;s important to check whether the cost was minimized or maximized</span>
            <span class="k">if</span> <span class="n">objective</span><span class="o">.</span><span class="n">optimize</span> <span class="o">==</span> <span class="s2">&quot;lower&quot;</span><span class="p">:</span>
                <span class="n">improvement</span> <span class="o">=</span> <span class="n">cost</span> <span class="o">&lt;</span> <span class="n">current_cost</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">improvement</span> <span class="o">=</span> <span class="n">cost</span> <span class="o">&gt;</span> <span class="n">current_cost</span>

            <span class="k">if</span> <span class="n">improvement</span><span class="p">:</span>
                <span class="n">current_cost</span> <span class="o">=</span> <span class="n">cost</span>

                <span class="n">costs_mean</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cost</span><span class="p">)</span>
                <span class="n">costs_std</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
                <span class="n">times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trial</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
                <span class="n">ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
                <span class="n">config_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trial</span><span class="o">.</span><span class="n">config_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">times</span><span class="p">,</span> <span class="n">costs_mean</span><span class="p">,</span> <span class="n">costs_std</span><span class="p">,</span> <span class="n">ids</span><span class="p">,</span> <span class="n">config_ids</span></div>


<div class="viewcode-block" id="AbstractRun.encode_config">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.encode_config">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">encode_config</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">Configuration</span><span class="p">],</span> <span class="n">specific</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode a given configuration (id) to a normalized list.</span>

<span class="sd">        If a configuration is passed, no look-up has to be done.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        config : Union[int, Dict[Any, Any], Configuration]</span>
<span class="sd">            Either the configuration id, as configuration as dict,</span>
<span class="sd">            or a Configuration itself.</span>
<span class="sd">        specific : bool</span>
<span class="sd">            Use specific encoding for fanova tree, by default False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List</span>
<span class="sd">            The encoded config as list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">Configuration</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
                <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configs</span><span class="p">[</span><span class="n">config</span><span class="p">]</span>

            <span class="n">config</span> <span class="o">=</span> <span class="n">Configuration</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configspace</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>

        <span class="n">hps</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configspace</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get_array</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">specific</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">value</span><span class="p">,</span> <span class="n">hp</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">hps</span><span class="p">):</span>
            <span class="c1"># NaNs should be encoded as -0.5</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">NAN_VALUE</span>
            <span class="c1"># Categorical values should be between 0..1</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hp</span><span class="p">,</span> <span class="n">CategoricalHyperparameter</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">hp</span><span class="o">.</span><span class="n">choices</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="c1"># Constants should be encoded as 1.0 (from 0)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hp</span><span class="p">,</span> <span class="n">Constant</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">CONSTANT_VALUE</span>

            <span class="n">x</span> <span class="o">+=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">x</span></div>


<div class="viewcode-block" id="AbstractRun.encode_configs">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.encode_configs">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">encode_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">configs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Configuration</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode a list of configurations into a corresponding numpy array.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        configs : List[Configuration]</span>
<span class="sd">            A list containing the configurations to be encoded.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        np.ndarray</span>
<span class="sd">            A numpy array with the encoded configurations.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x_set</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">configs</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode_config</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
            <span class="n">x_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x_set</span><span class="p">)</span></div>


<div class="viewcode-block" id="AbstractRun.get_encoded_data">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.AbstractRun.get_encoded_data">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_encoded_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">objectives</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Objective</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Objective</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">budget</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">seed</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">statuses</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">Status</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Status</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">specific</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_config_ids</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">include_combined_cost</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encode configurations to process them further.</span>

<span class="sd">        After the configurations are encoded,</span>
<span class="sd">        they can be used in model prediction.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        objectives : Optional[Union[Objective, List[Objective]]]</span>
<span class="sd">            Which objectives should be considered. If None, all objectives are considered.</span>
<span class="sd">            By default None.</span>
<span class="sd">        budget : Optional[List[Status]]</span>
<span class="sd">            Which budget should be considered. If None, only the highest budget is considered.</span>
<span class="sd">            By default None.</span>
<span class="sd">        seed: Optional[int]</span>
<span class="sd">            Which seed should be considered. If None, all seeds are considered.</span>
<span class="sd">            By default None.</span>
<span class="sd">        statuses : Optional[Union[Status, List[Status]]]</span>
<span class="sd">            Which stati should be considered. If None, all stati are considered.</span>
<span class="sd">            By default None.</span>
<span class="sd">        specific : bool</span>
<span class="sd">            Whether a specific encoding should be used. This encoding is compatible with pyrfr.</span>
<span class="sd">            A wrapper for pyrfr is implemented in ``deepcave.evaluators.epm``.</span>
<span class="sd">            By default False.</span>
<span class="sd">        include_config_ids : bool</span>
<span class="sd">            Whether to include configuration ids. By default False.</span>
<span class="sd">        include_combined_cost : bool, optional</span>
<span class="sd">            Whether to include combined cost. Note that the combined cost is calculated by the</span>
<span class="sd">            passed objectives only. By default False.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        df : pd.DataFrame</span>
<span class="sd">            Encoded dataframe with the following columns (depending on the parameters):</span>
<span class="sd">            [CONFIG_ID, HP1, HP2, ..., HPn, OBJ1, OBJ2, ..., OBJm, COMBINED_COST]</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If a hyperparameter (HP) is not supported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">objectives</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">objectives</span><span class="p">,</span> <span class="n">Objective</span><span class="p">):</span>
            <span class="n">objectives</span> <span class="o">=</span> <span class="p">[</span><span class="n">objectives</span><span class="p">]</span>

        <span class="n">x_set</span><span class="p">,</span> <span class="n">y_set</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="n">config_ids</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_all_costs</span><span class="p">(</span><span class="n">budget</span><span class="p">,</span> <span class="n">statuses</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">config_id</span><span class="p">,</span> <span class="n">config_costs</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configs</span><span class="p">[</span><span class="n">config_id</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">seed</span><span class="p">,</span> <span class="n">costs</span> <span class="ow">in</span> <span class="n">config_costs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">encode_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">specific</span><span class="o">=</span><span class="n">specific</span><span class="p">)</span>
                <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>

                <span class="c1"># Add all objectives</span>
                <span class="k">for</span> <span class="n">objective</span> <span class="ow">in</span> <span class="n">objectives</span><span class="p">:</span>
                    <span class="n">objective_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_objective_id</span><span class="p">(</span><span class="n">objective</span><span class="p">)</span>
                    <span class="n">y</span> <span class="o">+=</span> <span class="p">[</span><span class="n">costs</span><span class="p">[</span><span class="n">objective_id</span><span class="p">]]</span>

                <span class="c1"># Add combined cost</span>
                <span class="k">if</span> <span class="n">include_combined_cost</span><span class="p">:</span>
                    <span class="n">y</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">merge_costs</span><span class="p">(</span><span class="n">costs</span><span class="p">,</span> <span class="n">objectives</span><span class="p">)]</span>

                <span class="n">x_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
                <span class="n">y_set</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
                <span class="n">config_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">config_id</span><span class="p">)</span>

        <span class="n">x_set_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x_set</span><span class="p">)</span>
        <span class="n">y_set_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y_set</span><span class="p">)</span>
        <span class="n">config_ids_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">config_ids</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Imputation: Easiest case is to replace all nans with -1</span>
        <span class="c1"># However, since Stefan used different values for inactive hyperparameters,</span>
        <span class="c1"># Also different inactive hyperparameters have to be used, to be compatible</span>
        <span class="c1"># with the random forests.</span>
        <span class="c1"># https://github.com/automl/SMAC3/blob/a0c89502f240c1205f83983c8f7c904902ba416d/smac/epm/base_rf.py#L45</span>
        <span class="k">if</span> <span class="n">specific</span><span class="p">:</span>
            <span class="n">conditional</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">impute_values</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">hp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configspace</span><span class="o">.</span><span class="n">values</span><span class="p">())):</span>
                <span class="k">if</span> <span class="n">idx</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">conditional</span><span class="p">:</span>
                    <span class="n">parents</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configspace</span><span class="o">.</span><span class="n">parents_of</span><span class="p">[</span><span class="n">hp</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parents</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="n">conditional</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">conditional</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hp</span><span class="p">,</span> <span class="n">CategoricalHyperparameter</span><span class="p">):</span>
                            <span class="n">impute_values</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">hp</span><span class="o">.</span><span class="n">choices</span><span class="p">)</span>
                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span>
                            <span class="n">hp</span><span class="p">,</span>
                            <span class="p">(</span><span class="n">UniformFloatHyperparameter</span><span class="p">,</span> <span class="n">UniformIntegerHyperparameter</span><span class="p">),</span>
                        <span class="p">):</span>
                            <span class="n">impute_values</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
                        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">hp</span><span class="p">,</span> <span class="n">Constant</span><span class="p">):</span>
                            <span class="n">impute_values</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Hyperparameter not supported.&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">conditional</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">non_finite_mask</span> <span class="o">=</span> <span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isfinite</span><span class="p">(</span><span class="n">x_set_array</span><span class="p">[:,</span> <span class="n">idx</span><span class="p">])</span>
                    <span class="n">x_set_array</span><span class="p">[</span><span class="n">non_finite_mask</span><span class="p">,</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">impute_values</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>

        <span class="c1"># Now dataframes are created for both values and labels</span>
        <span class="c1"># [CONFIG_ID, HP1, HP2, ..., HPn, OBJ1, OBJ2, ..., OBJm, COMBINED_COST]</span>
        <span class="k">if</span> <span class="n">include_config_ids</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;config_id&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">columns</span> <span class="o">+=</span> <span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configspace</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span>
        <span class="n">columns</span> <span class="o">+=</span> <span class="p">[</span><span class="n">objective</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">objective</span> <span class="ow">in</span> <span class="n">objectives</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">include_combined_cost</span><span class="p">:</span>
            <span class="n">columns</span> <span class="o">+=</span> <span class="p">[</span><span class="n">COMBINED_COST_NAME</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">include_config_ids</span><span class="p">:</span>
            <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">config_ids_array</span><span class="p">,</span> <span class="n">x_set_array</span><span class="p">,</span> <span class="n">y_set_array</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">x_set_array</span><span class="p">,</span> <span class="n">y_set_array</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">data</span></div>
</div>



<div class="viewcode-block" id="check_equality">
<a class="viewcode-back" href="../../api/deepcave.runs.html#deepcave.runs.check_equality">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">check_equality</span><span class="p">(</span>
    <span class="n">runs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">AbstractRun</span><span class="p">],</span>
    <span class="n">meta</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">configspace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">objectives</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">budgets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">seeds</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check the passed runs on equality based on the selected runs.</span>

<span class="sd">    Return the requested attributes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    runs : list[AbstractRun]</span>
<span class="sd">        Runs to check for equality.</span>
<span class="sd">    meta : bool, optional</span>
<span class="sd">        Meta-Data excluding objectives and budgets, by default False.</span>
<span class="sd">    configspace : bool, optional</span>
<span class="sd">        Wheter to include the configuration space, by default True.</span>
<span class="sd">    objectives : bool, optional</span>
<span class="sd">        Wheter to include the objectives, by default True.</span>
<span class="sd">    budgets : bool, optional</span>
<span class="sd">        Whether to include the budgets, by default True.</span>
<span class="sd">    seeds : bool, optional</span>
<span class="sd">        Whether to include the seeds, by default False.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    Dict[str, Any]</span>
<span class="sd">        Dictionary containing the checked attributes.</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    NotMergeableError</span>
<span class="sd">        If the meta data of the runs are not equal.</span>
<span class="sd">        If the configuration spaces of the runs are not equal.</span>
<span class="sd">        If the budgets of the runs are not equal.</span>
<span class="sd">        If the objective of the runs are not equal.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">runs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="c1"># Check if objectives are mergeable</span>
    <span class="k">if</span> <span class="n">objectives</span><span class="p">:</span>
        <span class="n">o1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
            <span class="n">o2</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">get_objectives</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">o1</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">o1</span> <span class="o">=</span> <span class="n">o2</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">o2</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">NotMergeableError</span><span class="p">(</span>
                    <span class="s2">&quot;Objectives of runs are not equal.&quot;</span><span class="p">,</span> <span class="n">RunInequality</span><span class="o">.</span><span class="n">INEQ_OBJECTIVE</span>
                <span class="p">)</span>

            <span class="k">for</span> <span class="n">o1_</span><span class="p">,</span> <span class="n">o2_</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">o1</span><span class="p">,</span> <span class="n">o2</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">o1_</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">o2_</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">NotMergeableError</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">NotMergeableError</span><span class="p">(</span>
                        <span class="s2">&quot;Objectives of runs are not equal.&quot;</span><span class="p">,</span> <span class="n">RunInequality</span><span class="o">.</span><span class="n">INEQ_OBJECTIVE</span>
                    <span class="p">)</span>

        <span class="k">assert</span> <span class="n">o1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="n">serialized_objectives</span> <span class="o">=</span> <span class="p">[</span><span class="n">o</span><span class="o">.</span><span class="n">to_json</span><span class="p">()</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">o1</span><span class="p">]</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;objectives&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">serialized_objectives</span>
        <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;objectives&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">serialized_objectives</span>

    <span class="c1"># Also check if budgets are the same</span>
    <span class="k">if</span> <span class="n">budgets</span><span class="p">:</span>
        <span class="n">b1</span> <span class="o">=</span> <span class="n">runs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_budgets</span><span class="p">(</span><span class="n">include_combined</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
            <span class="n">b2</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">get_budgets</span><span class="p">(</span><span class="n">include_combined</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">b1</span> <span class="o">!=</span> <span class="n">b2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">NotMergeableError</span><span class="p">(</span><span class="s2">&quot;Budgets of runs are not equal.&quot;</span><span class="p">,</span> <span class="n">RunInequality</span><span class="o">.</span><span class="n">INEQ_BUDGET</span><span class="p">)</span>

        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;budgets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">b1</span>
        <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;budgets&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">b1</span>

    <span class="c1"># Make sure the same configspace is used</span>
    <span class="c1"># Otherwise it does not make sense to merge</span>
    <span class="c1"># the histories</span>
    <span class="k">if</span> <span class="n">configspace</span><span class="p">:</span>
        <span class="n">cs1</span> <span class="o">=</span> <span class="n">runs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">configspace</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
            <span class="n">cs2</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">configspace</span>
            <span class="k">if</span> <span class="n">cs1</span> <span class="o">!=</span> <span class="n">cs2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">NotMergeableError</span><span class="p">(</span>
                    <span class="s2">&quot;Configspace of runs are not equal.&quot;</span><span class="p">,</span> <span class="n">RunInequality</span><span class="o">.</span><span class="n">INEQ_CONFIGSPACE</span>
                <span class="p">)</span>

        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;configspace&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cs1</span>

    <span class="c1"># Check meta</span>
    <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
        <span class="n">ignore</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;objectives&quot;</span><span class="p">,</span> <span class="s2">&quot;budgets&quot;</span><span class="p">,</span> <span class="s2">&quot;wallclock_limit&quot;</span><span class="p">]</span>

        <span class="n">m1</span> <span class="o">=</span> <span class="n">runs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_meta</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
            <span class="n">m2</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">get_meta</span><span class="p">()</span>

            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">m1</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># Don&#39;t check on objectives or budgets</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ignore</span><span class="p">:</span>
                    <span class="k">continue</span>

                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">m2</span> <span class="ow">or</span> <span class="n">m2</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">!=</span> <span class="n">v</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">NotMergeableError</span><span class="p">(</span>
                        <span class="s2">&quot;Meta data of runs are not equal.&quot;</span><span class="p">,</span> <span class="n">RunInequality</span><span class="o">.</span><span class="n">INEQ_META</span>
                    <span class="p">)</span>

        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m1</span>

    <span class="c1"># Check if seeds are the same</span>
    <span class="k">if</span> <span class="n">seeds</span><span class="p">:</span>
        <span class="n">s1</span> <span class="o">=</span> <span class="n">runs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_seeds</span><span class="p">(</span><span class="n">include_combined</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="n">runs</span><span class="p">:</span>
            <span class="n">s2</span> <span class="o">=</span> <span class="n">run</span><span class="o">.</span><span class="n">get_seeds</span><span class="p">(</span><span class="n">include_combined</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">s1</span> <span class="o">!=</span> <span class="n">s2</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">NotMergeableError</span><span class="p">(</span><span class="s2">&quot;Seeds of runs are not equal.&quot;</span><span class="p">,</span> <span class="n">RunInequality</span><span class="o">.</span><span class="n">INEQ_SEED</span><span class="p">)</span>

        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;seeds&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s1</span>
        <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;meta&quot;</span><span class="p">][</span><span class="s2">&quot;seeds&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s1</span>

    <span class="k">return</span> <span class="n">result</span></div>

</pre></div>

              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../../_static/js/index.9ea38e314b9e6d9dab77.js"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright Copyright 2025, S. Segel and H. Graf and E. Bergman and K. Thieme and L. Fehring and A. Tornede and R. Sass and A. Biedenkapp and F. Hutter and M. Lindauer.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a>
7.4.7. Template is modified version of <a
href="https://pydata-sphinx-theme.readthedocs.io">PyData Sphinx Theme</a>. <br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>